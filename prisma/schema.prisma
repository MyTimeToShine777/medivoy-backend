generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model accommodations {
  accommodationId           String     @id @db.Uuid
  bookingId                 String?    @db.Uuid
  userId                    String     @db.Uuid
  cityId                    String?    @db.Uuid
  hospitalId                String?    @db.Uuid
  type                      String     @db.VarChar(50)
  name                      String     @db.VarChar(150)
  address                   String
  city                      String     @db.VarChar(255)
  state                     String?    @db.VarChar(255)
  postalCode                String?    @db.VarChar(50)
  latitude                  Decimal?   @db.Decimal(10, 8)
  longitude                 Decimal?   @db.Decimal(11, 8)
  distanceFromHospital      Decimal?   @db.Decimal(5, 2)
  phone                     String?    @db.VarChar(255)
  email                     String?    @db.VarChar(255)
  website                   String?    @db.VarChar(255)
  contactPerson             String?    @db.VarChar(255)
  checkInDate               DateTime
  checkOutDate              DateTime
  numberOfNights            Int?
  numberOfRooms             Int        @default(1)
  numberOfGuests            Int
  companionNames            Json?
  roomType                  String?    @db.VarChar(50)
  bedType                   String?    @db.VarChar(50)
  roomAmenities             Json?
  mealInclusion             String?    @default("breakfast") @db.VarChar(50)
  mealDetails               Json?
  pricePerNight             Decimal    @db.Decimal(10, 2)
  totalPrice                Decimal    @db.Decimal(12, 2)
  currency                  String     @default("USD") @db.VarChar(3)
  discount                  Decimal    @default(0) @db.Decimal(10, 2)
  tax                       Decimal    @default(0) @db.Decimal(10, 2)
  finalPrice                Decimal    @db.Decimal(12, 2)
  cancellationPolicy        String?
  status                    String     @default("pending") @db.VarChar(50)
  confirmationNumber        String?    @unique @db.VarChar(255)
  bookingConfirmedAt        DateTime?
  checkedInAt               DateTime?
  checkedOutAt              DateTime?
  amenities                 Json?
  availableServices         Json?
  specialRequirements       String?
  accessibilityRequirements Json?
  dietaryRestrictions       Json?
  rating                    Decimal?   @db.Decimal(3, 2)
  cleanliness               Decimal?   @db.Decimal(3, 2)
  comfort                   Decimal?   @db.Decimal(3, 2)
  service                   Decimal?   @db.Decimal(3, 2)
  valueForMoney             Decimal?   @db.Decimal(3, 2)
  feedback                  String?
  reviewSubmittedAt         DateTime?
  isPaid                    Boolean    @default(false)
  paymentMethod             String?    @db.VarChar(50)
  paymentId                 Int?
  paidAt                    DateTime?
  images                    Json?
  bookingConfirmation       String?    @db.VarChar(500)
  guestId                   String?    @db.VarChar(255)
  internalNotes             String?
  tags                      Json?
  isActive                  Boolean    @default(true)
  createdAt                 DateTime   @default(now())
  updatedAt                 DateTime
  bookings                  bookings?  @relation(fields: [bookingId], references: [bookingId])
  cities                    cities?    @relation(fields: [cityId], references: [cityId])
  hospitals                 hospitals? @relation(fields: [hospitalId], references: [hospitalId])
  payments                  payments?  @relation(fields: [paymentId], references: [id])
  users                     users      @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([bookingId])
  @@index([checkInDate])
  @@index([status])
  @@index([userId])
}

model activities {
  activityId String   @id @db.Uuid
  userId     String?  @db.Uuid
  sessionId  String?  @db.Uuid
  type       String   @db.VarChar(50)
  action     String   @db.VarChar(100)
  entityType String?  @db.VarChar(50)
  entityId   String?  @db.Uuid
  metadata   Json?
  ipAddress  String?  @db.VarChar(45)
  userAgent  String?
  createdAt  DateTime @default(now())

  @@index([createdAt])
  @@index([entityType, entityId])
  @@index([sessionId])
  @@index([type])
  @@index([userId])
}

model appointments {
  appointmentId       String         @id @db.Uuid
  userId              String?        @db.Uuid
  patientId           String         @db.Uuid
  doctorId            String         @db.Uuid
  hospitalId          String?        @db.Uuid
  departmentId        String?        @db.Uuid
  bookingId           String?        @db.Uuid
  appointmentNumber   String         @unique @db.VarChar(50)
  appointmentType     String         @db.VarChar(50)
  appointmentDate     DateTime       @db.Date
  appointmentTime     DateTime       @db.Time(6)
  duration            Int            @default(30)
  endTime             DateTime?      @db.Time(6)
  status              String         @default("scheduled") @db.VarChar(50)
  reasonForVisit      String?
  symptoms            Json?
  chiefComplaint      String?
  presentingIssue     String?
  urgencyLevel        String?        @default("normal") @db.VarChar(20)
  consultationType    String         @default("in-person") @db.VarChar(50)
  meetingLink         String?        @db.VarChar(500)
  meetingId           String?        @db.VarChar(255)
  meetingPassword     String?        @db.VarChar(255)
  roomNumber          String?        @db.VarChar(50)
  scheduledAt         DateTime       @default(now())
  confirmedAt         DateTime?
  checkedInAt         DateTime?
  startedAt           DateTime?
  completedAt         DateTime?
  cancelledAt         DateTime?
  cancellationReason  String?
  cancelledBy         String?        @db.Uuid
  rescheduledFrom     String?        @db.Uuid
  rescheduledTo       String?        @db.Uuid
  noShowAt            DateTime?
  reminderSent        Boolean        @default(false)
  reminderSentAt      DateTime?
  confirmationSent    Boolean        @default(false)
  confirmationSentAt  DateTime?
  followUpRequired    Boolean        @default(false)
  followUpDate        DateTime?
  consultationFee     Decimal        @db.Decimal(10, 2)
  currency            String         @default("USD") @db.VarChar(3)
  isPaid              Boolean        @default(false)
  paymentId           Int?
  paymentMethod       String?        @db.VarChar(50)
  paidAt              DateTime?
  invoiceId           String?        @db.Uuid
  vitalSigns          Json?
  diagnosis           String?
  prescriptionId      String?        @unique @db.Uuid
  labTestsOrdered     Json?
  referralGiven       Boolean        @default(false)
  referralDoctorId    String?        @db.Uuid
  referralNotes       String?
  doctorNotes         String?
  nurseNotes          String?
  internalNotes       String?
  patientNotes        String?
  patientRating       Int?
  patientFeedback     String?
  feedbackSubmittedAt DateTime?
  source              String?        @default("web") @db.VarChar(50)
  ipAddress           String?        @db.VarChar(45)
  userAgent           String?
  isActive            Boolean        @default(true)
  tags                Json?
  metadata            Json?
  createdAt           DateTime       @default(now())
  updatedAt           DateTime
  bookings            bookings?      @relation(fields: [bookingId], references: [bookingId])
  departments         departments?   @relation(fields: [departmentId], references: [departmentId])
  doctors             doctors        @relation(fields: [doctorId], references: [doctorId], onDelete: Cascade)
  hospitals           hospitals?     @relation(fields: [hospitalId], references: [hospitalId])
  invoices            invoices?      @relation(fields: [invoiceId], references: [invoiceId])
  payments            payments?      @relation(fields: [paymentId], references: [id])
  prescriptions       prescriptions? @relation(fields: [prescriptionId], references: [prescriptionId])
  users               users?         @relation(fields: [userId], references: [userId])
  lab_tests           lab_tests[]

  @@index([appointmentDate])
  @@index([appointmentType])
  @@index([bookingId])
  @@index([doctorId])
  @@index([hospitalId])
  @@index([patientId])
  @@index([status])
  @@index([userId])
}

model audit_logs {
  auditLogId     String   @id @db.Uuid
  userId         String?  @db.Uuid
  action         String   @db.VarChar(100)
  entity         String?  @db.VarChar(100)
  entityId       String?  @db.Uuid
  oldValues      Json?
  newValues      Json?
  changes        Json?
  ipAddress      String?  @db.VarChar(45)
  userAgent      String?
  requestMethod  String?  @db.VarChar(10)
  requestUrl     String?  @db.VarChar(500)
  requestBody    Json?
  responseStatus Int?
  responseTime   Int?
  metadata       Json?
  tags           Json?
  severity       String?  @default("info") @db.VarChar(20)
  status         String?  @db.VarChar(50)
  errorMessage   String?
  stackTrace     String?
  sessionId      String?  @db.Uuid
  deviceId       String?  @db.Uuid
  createdAt      DateTime @default(now())
  users          users?   @relation(fields: [userId], references: [userId])

  @@index([action])
  @@index([createdAt])
  @@index([entityId])
  @@index([entity])
  @@index([severity])
  @@index([userId])
}

model backup_logs {
  logId              String   @id @db.Uuid
  backupId           String   @db.Uuid
  logLevel           String   @default("info") @db.VarChar(20)
  message            String
  details            Json?
  errorStack         String?
  currentStep        String?  @db.VarChar(100)
  totalSteps         Int?
  completedSteps     Int?
  progressPercentage Decimal? @db.Decimal(5, 2)
  createdAt          DateTime @default(now())
  backups            backups  @relation(fields: [backupId], references: [backupId], onDelete: Cascade)

  @@index([backupId])
  @@index([createdAt])
  @@index([logLevel])
}

model backups {
  backupId           String        @id @db.Uuid
  backupType         String        @db.VarChar(50)
  backupName         String        @db.VarChar(255)
  backupLocation     String        @db.VarChar(500)
  fileName           String        @db.VarChar(255)
  fileSize           BigInt?
  fileSizeReadable   String?       @db.VarChar(50)
  status             String        @default("pending") @db.VarChar(50)
  startedAt          DateTime?
  completedAt        DateTime?
  failedAt           DateTime?
  compressionEnabled Boolean       @default(true)
  encryptionEnabled  Boolean       @default(false)
  retentionDays      Int           @default(30)
  tables             Json?
  databases          Json?
  excludedTables     Json?
  totalRecords       Int?
  successfulRecords  Int?
  failedRecords      Int?
  errorMessage       String?
  errorDetails       Json?
  triggerType        String?       @default("manual") @db.VarChar(50)
  triggeredBy        String?       @db.Uuid
  scheduledBackupId  String?       @db.Uuid
  metadata           Json?
  createdAt          DateTime      @default(now())
  updatedAt          DateTime
  backup_logs        backup_logs[]

  @@index([backupType])
  @@index([createdAt])
  @@index([status])
}

model booking_add_ons {
  addOnId          String          @id @db.Uuid
  bookingId        String          @db.Uuid
  addOnType        String          @db.VarChar(100)
  addOnName        String          @db.VarChar(255)
  addOnDescription String?
  category         String?         @db.VarChar(50)
  subcategory      String?         @db.VarChar(50)
  addOnPrice       Decimal         @db.Decimal(10, 2)
  currency         String          @default("USD") @db.VarChar(3)
  quantity         Int             @default(1)
  totalPrice       Decimal         @db.Decimal(10, 2)
  discount         Decimal         @default(0) @db.Decimal(10, 2)
  finalPrice       Decimal         @db.Decimal(10, 2)
  isSelected       Boolean         @default(true)
  isMandatory      Boolean         @default(false)
  isCustom         Boolean         @default(false)
  status           String          @default("active") @db.VarChar(50)
  details          Json?
  specifications   Json?
  features         Json?
  displayOrder     Int?
  isActive         Boolean         @default(true)
  createdAt        DateTime        @default(now())
  updatedAt        DateTime
  featureAddOnId   String?         @db.Uuid
  bookings         bookings        @relation(fields: [bookingId], references: [bookingId], onDelete: Cascade)
  feature_addons   feature_addons? @relation(fields: [featureAddOnId], references: [addOnId])

  @@index([addOnType])
  @@index([bookingId])
  @@index([category])
  @@index([isSelected])
}

model booking_preferences {
  preferenceId           String    @id @db.Uuid
  bookingId              String    @unique @db.Uuid
  accommodationType      String?   @db.VarChar(100)
  roomType               String?   @db.VarChar(50)
  bedType                String?   @db.VarChar(50)
  smokingPreference      String?   @default("non-smoking") @db.VarChar(50)
  floorPreference        String?   @db.VarChar(50)
  viewPreference         String?   @db.VarChar(50)
  dietaryRequirements    String?
  dietType               String?   @db.VarChar(50)
  allergies              Json?
  foodPreferences        Json?
  mealTimings            Json?
  specialRequests        String?
  medicalEquipment       Json?
  accessibilityNeeds     Json?
  mobilityAssistance     Boolean   @default(false)
  wheelchairRequired     Boolean   @default(false)
  oxygenRequired         Boolean   @default(false)
  languagePreference     String?   @db.VarChar(50)
  interpreterRequired    Boolean   @default(false)
  interpreterLanguage    String?   @db.VarChar(50)
  communicationMode      String?   @default("email") @db.VarChar(50)
  transportationNeeded   Boolean   @default(false)
  transportationType     String?   @db.VarChar(50)
  pickupLocation         String?   @db.VarChar(255)
  dropoffLocation        String?   @db.VarChar(255)
  flightPreferences      Json?
  visaAssistanceNeeded   Boolean   @default(false)
  passportNumber         String?   @db.VarChar(50)
  passportExpiry         DateTime?
  visaStatus             String?   @db.VarChar(50)
  companionCount         Int       @default(0)
  companionDetails       Json?
  companionAccommodation Boolean   @default(false)
  additionalServices     Json?
  tourismInterest        Boolean   @default(false)
  tourPreferences        Json?
  notes                  String?
  createdAt              DateTime  @default(now())
  updatedAt              DateTime
  bookings               bookings  @relation(fields: [bookingId], references: [bookingId], onDelete: Cascade)

  @@index([bookingId])
}

model booking_reviews {
  reviewId              String    @id @db.Uuid
  bookingId             String    @unique @db.Uuid
  rating                Int
  comment               String?
  serviceRating         Int?
  hospitalRating        Int?
  doctorRating          Int?
  accommodationRating   Int?
  foodRating            Int?
  cleanlinessRating     Int?
  staffRating           Int?
  facilitiesRating      Int?
  valueForMoneyRating   Int?
  treatmentFeedback     String?
  hospitalFeedback      String?
  doctorFeedback        String?
  accommodationFeedback String?
  wouldRecommend        Boolean   @default(true)
  recommendationReason  String?
  positiveAspects       Json?
  negativeAspects       Json?
  suggestions           String?
  isVerified            Boolean   @default(false)
  verifiedAt            DateTime?
  verifiedBy            String?   @db.Uuid
  isPublished           Boolean   @default(false)
  publishedAt           DateTime?
  isVisible             Boolean   @default(true)
  moderationStatus      String?   @default("pending") @db.VarChar(50)
  moderatedAt           DateTime?
  moderatedBy           String?   @db.Uuid
  moderationNotes       String?
  helpfulCount          Int       @default(0)
  unhelpfulCount        Int       @default(0)
  createdAt             DateTime  @default(now())
  updatedAt             DateTime
  bookings              bookings  @relation(fields: [bookingId], references: [bookingId], onDelete: Cascade)

  @@index([bookingId])
  @@index([isPublished])
  @@index([isVerified])
  @@index([rating])
}

model booking_status_history {
  historyId          String    @id @db.Uuid
  bookingId          String    @db.Uuid
  previousStatus     String?   @db.VarChar(50)
  newStatus          String    @db.VarChar(50)
  changedBy          String?   @db.Uuid
  changedByRole      String?   @db.VarChar(50)
  reason             String?
  notes              String?
  metadata           Json?
  ipAddress          String?   @db.VarChar(45)
  userAgent          String?
  notificationSent   Boolean   @default(false)
  notificationSentAt DateTime?
  createdAt          DateTime  @default(now())
  bookings           bookings  @relation(fields: [bookingId], references: [bookingId], onDelete: Cascade)

  @@index([bookingId])
  @@index([createdAt])
  @@index([newStatus])
}

model bookings {
  bookingId              String                   @id @db.Uuid
  userId                 String                   @db.Uuid
  patientId              String?                  @db.Uuid
  treatmentId            String?                  @db.Uuid
  hospitalId             String?                  @db.Uuid
  doctorId               String?                  @db.Uuid
  countryId              String?                  @db.Uuid
  cityId                 String?                  @db.Uuid
  packageId              String?                  @db.Uuid
  departmentId           String?                  @db.Uuid
  bookingNumber          String                   @unique @db.VarChar(50)
  referenceNumber        String?                  @unique @db.VarChar(100)
  externalBookingId      String?                  @db.VarChar(255)
  bookingType            String                   @db.VarChar(50)
  status                 String                   @default("pending") @db.VarChar(50)
  priority               String?                  @default("normal") @db.VarChar(20)
  basePrice              Decimal                  @db.Decimal(12, 2)
  addOnsPrice            Decimal                  @default(0) @db.Decimal(12, 2)
  accommodationPrice     Decimal                  @default(0) @db.Decimal(12, 2)
  travelPrice            Decimal                  @default(0) @db.Decimal(12, 2)
  subtotal               Decimal                  @db.Decimal(12, 2)
  discount               Decimal                  @default(0) @db.Decimal(12, 2)
  discountType           String?                  @db.VarChar(50)
  discountCode           String?                  @db.VarChar(100)
  tax                    Decimal                  @default(0) @db.Decimal(12, 2)
  taxPercentage          Decimal                  @default(0) @db.Decimal(5, 2)
  totalPrice             Decimal                  @db.Decimal(12, 2)
  currency               String                   @default("USD") @db.VarChar(3)
  exchangeRate           Decimal?                 @db.Decimal(10, 4)
  paymentStatus          String                   @default("pending") @db.VarChar(50)
  paidAmount             Decimal                  @default(0) @db.Decimal(12, 2)
  remainingAmount        Decimal?                 @db.Decimal(12, 2)
  paymentMethod          String?                  @db.VarChar(50)
  paymentDueDate         DateTime?
  appointmentDate        DateTime?
  appointmentTime        DateTime?                @db.Time(6)
  estimatedDuration      Int?
  appointmentEndTime     DateTime?                @db.Time(6)
  arrivalDate            DateTime?
  departureDate          DateTime?
  numberOfNights         Int?
  numberOfTravelers      Int                      @default(1)
  numberOfCompanions     Int                      @default(0)
  patientName            String?                  @db.VarChar(255)
  patientAge             Int?
  patientGender          String?                  @db.VarChar(20)
  patientEmail           String?                  @db.VarChar(255)
  patientPhone           String?                  @db.VarChar(20)
  patientCity            String?                  @db.VarChar(100)
  comorbidConditions     Json?
  allergies              Json?
  currentMedications     Json?
  medicalHistory         String?
  specialRequirements    String?
  hasInsurance           Boolean                  @default(false)
  insuranceProvider      String?                  @db.VarChar(255)
  insuranceNumber        String?                  @db.VarChar(100)
  insuranceCoverage      Decimal?                 @db.Decimal(12, 2)
  expertCallStatus       String                   @default("pending") @db.VarChar(50)
  expertCallScheduledAt  DateTime?
  expertCallCompletedAt  DateTime?
  expertCallNotes        String?
  expertCallRecordingUrl String?                  @db.VarChar(500)
  documentsRequired      Json?
  documentsUploaded      Json?
  documentsVerified      Boolean                  @default(false)
  documentsVerifiedAt    DateTime?
  documentsVerifiedBy    String?                  @db.Uuid
  requestedAt            DateTime                 @default(now())
  confirmedAt            DateTime?
  approvedAt             DateTime?
  approvedBy             String?                  @db.Uuid
  startedAt              DateTime?
  completedAt            DateTime?
  cancelledAt            DateTime?
  cancellationReason     String?
  cancelledBy            String?                  @db.Uuid
  refundAmount           Decimal?                 @db.Decimal(12, 2)
  refundStatus           String?                  @db.VarChar(50)
  refundRequestedAt      DateTime?
  refundProcessedAt      DateTime?
  refundReason           String?
  notes                  String?
  internalNotes          String?
  patientNotes           String?
  adminNotes             String?
  rating                 Int?
  feedback               String?
  feedbackSubmittedAt    DateTime?
  source                 String?                  @default("web") @db.VarChar(50)
  utmSource              String?                  @db.VarChar(255)
  utmMedium              String?                  @db.VarChar(255)
  utmCampaign            String?                  @db.VarChar(255)
  referralCode           String?                  @db.VarChar(100)
  metadata               Json?
  tags                   Json?
  isActive               Boolean                  @default(true)
  createdAt              DateTime                 @default(now())
  updatedAt              DateTime
  accommodations         accommodations[]
  appointments           appointments[]
  booking_add_ons        booking_add_ons[]
  booking_preferences    booking_preferences?
  booking_reviews        booking_reviews?
  booking_status_history booking_status_history[]
  cities                 cities?                  @relation(fields: [cityId], references: [cityId])
  countries              countries?               @relation(fields: [countryId], references: [countryId])
  departments            departments?             @relation(fields: [departmentId], references: [departmentId])
  hospitals              hospitals?               @relation(fields: [hospitalId], references: [hospitalId])
  packages               packages?                @relation(fields: [packageId], references: [packageId])
  patients               patients?                @relation(fields: [patientId], references: [patientId])
  treatments             treatments?              @relation(fields: [treatmentId], references: [treatmentId])
  users                  users                    @relation(fields: [userId], references: [userId], onDelete: Cascade)
  companions             companions[]
  consultations          consultations[]
  documents              documents[]
  expert_calls           expert_calls[]
  flights                flights[]
  insurance_documents    insurance_documents[]
  invoices               invoices[]
  payments               payments[]
  refunds                refunds[]
  trains                 trains[]
  travel_arrangements    travel_arrangements[]

  @@index([bookingType])
  @@index([cityId])
  @@index([countryId])
  @@index([createdAt])
  @@index([expertCallStatus])
  @@index([hospitalId])
  @@index([patientId])
  @@index([paymentStatus])
  @@index([status])
  @@index([treatmentId])
  @@index([userId])
}

model chat_conversations {
  conversationId                             String          @id @db.Uuid
  senderId                                   String          @db.Uuid
  receiverId                                 String          @db.Uuid
  bookingId                                  String?         @db.Uuid
  title                                      String?         @db.VarChar(255)
  type                                       String          @default("direct") @db.VarChar(50)
  status                                     String          @default("active") @db.VarChar(50)
  lastMessageAt                              DateTime?
  lastMessagePreview                         String?         @db.VarChar(500)
  unreadCount                                Int             @default(0)
  isMuted                                    Boolean         @default(false)
  mutedUntil                                 DateTime?
  isArchived                                 Boolean         @default(false)
  archivedAt                                 DateTime?
  isPinned                                   Boolean         @default(false)
  pinnedAt                                   DateTime?
  createdAt                                  DateTime        @default(now())
  updatedAt                                  DateTime
  users_chat_conversations_receiverIdTousers users           @relation("chat_conversations_receiverIdTousers", fields: [receiverId], references: [userId], onDelete: Cascade)
  users_chat_conversations_senderIdTousers   users           @relation("chat_conversations_senderIdTousers", fields: [senderId], references: [userId], onDelete: Cascade)
  chat_messages                              chat_messages[]

  @@index([bookingId])
  @@index([receiverId])
  @@index([senderId])
  @@index([status])
}

model chat_messages {
  messageId              String             @id @db.Uuid
  conversationId         String             @db.Uuid
  senderId               String             @db.Uuid
  message                String
  messageType            String             @default("text") @db.VarChar(50)
  attachments            Json?
  mediaUrl               String?            @db.VarChar(500)
  mediaType              String?            @db.VarChar(50)
  thumbnailUrl           String?            @db.VarChar(500)
  isRead                 Boolean            @default(false)
  readAt                 DateTime?
  isDelivered            Boolean            @default(false)
  deliveredAt            DateTime?
  isDeleted              Boolean            @default(false)
  deletedAt              DateTime?
  deletedBy              String?            @db.Uuid
  replyToMessageId       String?            @db.Uuid
  forwardedFromMessageId String?            @db.Uuid
  isForwarded            Boolean            @default(false)
  metadata               Json?
  createdAt              DateTime           @default(now())
  updatedAt              DateTime
  chat_conversations     chat_conversations @relation(fields: [conversationId], references: [conversationId], onDelete: Cascade)
  users                  users              @relation(fields: [senderId], references: [userId], onDelete: Cascade)

  @@index([conversationId])
  @@index([createdAt])
  @@index([isRead])
  @@index([senderId])
}

model cities {
  cityId              String           @id @db.Uuid
  countryId           String           @db.Uuid
  stateId             String?          @db.Uuid
  cityName            String           @db.VarChar(255)
  cityNameLocal       String?          @db.VarChar(255)
  stateOrProvince     String?          @db.VarChar(255)
  latitude            Decimal?         @db.Decimal(10, 8)
  longitude           Decimal?         @db.Decimal(11, 8)
  timezone            String?          @db.VarChar(100)
  elevation           Int?
  isoCode             String?          @db.VarChar(10)
  postalCode          String?          @db.VarChar(20)
  areaCode            String?          @db.VarChar(10)
  population          BigInt?
  populationYear      Int?
  area                Decimal?         @db.Decimal(10, 2)
  density             Decimal?         @db.Decimal(10, 2)
  description         String?
  descriptionLocal    String?
  shortDescription    String?          @db.VarChar(500)
  isMedicalTourismHub Boolean          @default(false)
  popularFor          Json?
  specialties         Json?
  hospitalCount       Int              @default(0)
  doctorCount         Int              @default(0)
  treatmentCount      Int              @default(0)
  averageRating       Decimal?         @db.Decimal(3, 2)
  totalReviews        Int              @default(0)
  imageUrl            String?          @db.VarChar(500)
  images              Json?
  videoUrl            String?          @db.VarChar(500)
  slug                String           @unique @db.VarChar(255)
  metaTitle           String?          @db.VarChar(255)
  metaDescription     String?          @db.VarChar(500)
  metaKeywords        String?          @db.VarChar(500)
  isActive            Boolean          @default(true)
  isFeatured          Boolean          @default(false)
  displayOrder        Int              @default(0)
  createdAt           DateTime         @default(now())
  updatedAt           DateTime
  accommodations      accommodations[]
  bookings            bookings[]
  countries           countries        @relation(fields: [countryId], references: [countryId], onDelete: Cascade)
  states              states?          @relation(fields: [stateId], references: [stateId])
  hospitals           hospitals[]
  packages            packages[]

  @@index([cityName])
  @@index([countryId])
  @@index([isActive])
  @@index([isFeatured])
  @@index([slug])
}

model comorbid_conditions {
  comorbidId          String    @id @db.Uuid
  patientId           String    @db.Uuid
  conditionName       String    @db.VarChar(255)
  conditionCode       String?   @db.VarChar(50)
  icdCode             String?   @db.VarChar(20)
  diagnosedDate       DateTime? @db.Date
  diagnosedBy         String?   @db.VarChar(255)
  diagnosisFacility   String?   @db.VarChar(255)
  severity            String?   @db.VarChar(50)
  status              String    @default("active") @db.VarChar(50)
  currentTreatment    String?
  medications         Json?
  treatmentStartDate  DateTime? @db.Date
  lastReviewDate      DateTime? @db.Date
  nextReviewDate      DateTime? @db.Date
  monitoringFrequency String?   @db.VarChar(50)
  impactOnDailyLiving String?
  restrictions        Json?
  precautions         String?
  notes               String?
  clinicalNotes       String?
  isActive            Boolean   @default(true)
  createdAt           DateTime  @default(now())
  updatedAt           DateTime
  patients            patients  @relation(fields: [patientId], references: [patientId], onDelete: Cascade)

  @@index([conditionName])
  @@index([patientId])
  @@index([status])
}

model companions {
  companionId              String    @id @db.Uuid
  userId                   String    @db.Uuid
  bookingId                String    @db.Uuid
  firstName                String    @db.VarChar(100)
  lastName                 String    @db.VarChar(100)
  fullName                 String    @db.VarChar(255)
  relationship             String    @db.VarChar(50)
  email                    String?   @db.VarChar(255)
  phoneNumber              String?   @db.VarChar(20)
  alternatePhone           String?   @db.VarChar(20)
  dateOfBirth              DateTime? @db.Date
  age                      Int?
  gender                   String?   @db.VarChar(20)
  nationality              String?   @db.VarChar(100)
  passportNumber           String?   @db.VarChar(50)
  passportExpiry           DateTime? @db.Date
  idType                   String?   @db.VarChar(50)
  idNumber                 String?   @db.VarChar(100)
  address                  String?
  city                     String?   @db.VarChar(100)
  state                    String?   @db.VarChar(100)
  country                  String?   @db.VarChar(100)
  postalCode               String?   @db.VarChar(20)
  bloodGroup               String?   @db.VarChar(10)
  allergies                Json?
  medicalConditions        Json?
  emergencyMedication      String?
  emergencyContactName     String?   @db.VarChar(255)
  emergencyContactPhone    String?   @db.VarChar(20)
  emergencyContactRelation String?   @db.VarChar(50)
  needsAccommodation       Boolean   @default(false)
  accommodationId          String?   @db.Uuid
  roomSharing              Boolean   @default(true)
  dietaryRestrictions      Json?
  foodAllergies            Json?
  mealPreferences          String?
  specialRequirements      String?
  accessibilityNeeds       Json?
  mobilityAssistance       Boolean   @default(false)
  notes                    String?
  internalNotes            String?
  createdAt                DateTime  @default(now())
  updatedAt                DateTime
  bookings                 bookings  @relation(fields: [bookingId], references: [bookingId], onDelete: Cascade)
  users                    users     @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([bookingId])
  @@index([userId])
}

model consultations {
  consultationId         String     @id @db.Uuid
  userId                 String     @db.Uuid
  patientId              String     @db.Uuid
  doctorId               String     @db.Uuid
  bookingId              String?    @db.Uuid
  hospitalId             String?    @db.Uuid
  consultationNumber     String     @unique @db.VarChar(50)
  consultationType       String     @db.VarChar(50)
  consultationDate       DateTime   @db.Date
  consultationTime       DateTime   @db.Time(6)
  duration               Int        @default(30)
  status                 String     @default("scheduled") @db.VarChar(50)
  chiefComplaint         String
  symptoms               Json?
  symptomDuration        String?    @db.VarChar(100)
  symptomSeverity        String?    @db.VarChar(50)
  presentIllness         String?
  pastMedicalHistory     String?
  familyHistory          String?
  socialHistory          String?
  allergies              Json?
  currentMedications     Json?
  vitalSigns             Json?
  generalAppearance      String?
  systemicExamination    Json?
  physicalFindings       String?
  investigationsOrdered  Json?
  labTestsOrdered        Json?
  imagingOrdered         Json?
  investigationResults   Json?
  provisionalDiagnosis   String?
  finalDiagnosis         String?
  differentialDiagnosis  Json?
  icdCodes               Json?
  treatmentPlan          String?
  prescriptions          Json?
  proceduresRecommended  Json?
  surgeryRecommended     Boolean    @default(false)
  surgeryDetails         String?
  followUpRequired       Boolean    @default(false)
  followUpDate           DateTime?  @db.Date
  followUpNotes          String?
  referralRequired       Boolean    @default(false)
  referralTo             String?    @db.Uuid
  referralSpecialty      String?    @db.VarChar(255)
  referralReason         String?
  referralNotes          String?
  doctorNotes            String?
  clinicalNotes          String?
  privateNotes           String?
  adviceGiven            String?
  lifestyleModifications Json?
  dietaryAdvice          String?
  exerciseAdvice         String?
  attachments            Json?
  recordingUrl           String?    @db.VarChar(500)
  transcriptUrl          String?    @db.VarChar(500)
  consultationFee        Decimal    @db.Decimal(10, 2)
  currency               String     @default("USD") @db.VarChar(3)
  isPaid                 Boolean    @default(false)
  paymentId              String?    @db.Uuid
  completedAt            DateTime?
  cancelledAt            DateTime?
  cancellationReason     String?
  createdAt              DateTime   @default(now())
  updatedAt              DateTime
  bookings               bookings?  @relation(fields: [bookingId], references: [bookingId])
  doctors                doctors    @relation(fields: [doctorId], references: [doctorId], onDelete: Cascade)
  hospitals              hospitals? @relation(fields: [hospitalId], references: [hospitalId])
  patients               patients   @relation(fields: [patientId], references: [patientId], onDelete: Cascade)
  users                  users      @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([bookingId])
  @@index([consultationDate])
  @@index([doctorId])
  @@index([patientId])
  @@index([status])
  @@index([userId])
}

model countries {
  countryId                   String      @id @db.Uuid
  countryName                 String      @unique @db.VarChar(255)
  countryNameLocal            String?     @db.VarChar(255)
  officialName                String?     @db.VarChar(255)
  iso2Code                    String      @unique @db.VarChar(2)
  iso3Code                    String      @unique @db.VarChar(3)
  numericCode                 String?     @db.VarChar(10)
  callingCode                 String?     @db.VarChar(10)
  continent                   String?     @db.VarChar(50)
  region                      String?     @db.VarChar(100)
  subregion                   String?     @db.VarChar(100)
  latitude                    Decimal?    @db.Decimal(10, 8)
  longitude                   Decimal?    @db.Decimal(11, 8)
  capital                     String?     @db.VarChar(255)
  population                  BigInt?
  area                        Decimal?    @db.Decimal(15, 2)
  currencyCode                String?     @db.VarChar(3)
  currencyName                String?     @db.VarChar(100)
  currencySymbol              String?     @db.VarChar(10)
  languages                   Json?
  primaryLanguage             String?     @db.VarChar(100)
  description                 String?
  descriptionLocal            String?
  shortDescription            String?     @db.VarChar(500)
  isMedicalTourismDestination Boolean     @default(false)
  popularFor                  Json?
  specialties                 Json?
  medicalTourismRanking       Int?
  visaRequired                Boolean     @default(true)
  visaOnArrival               Boolean     @default(false)
  eVisaAvailable              Boolean     @default(false)
  visaFee                     Decimal?    @db.Decimal(10, 2)
  visaProcessingDays          Int?
  visaValidityDays            Int?
  visaInfo                    String?
  hospitalCount               Int         @default(0)
  doctorCount                 Int         @default(0)
  cityCount                   Int         @default(0)
  treatmentCount              Int         @default(0)
  averageRating               Decimal?    @db.Decimal(3, 2)
  totalReviews                Int         @default(0)
  flagUrl                     String?     @db.VarChar(500)
  imageUrl                    String?     @db.VarChar(500)
  images                      Json?
  slug                        String      @unique @db.VarChar(255)
  metaTitle                   String?     @db.VarChar(255)
  metaDescription             String?     @db.VarChar(500)
  metaKeywords                String?     @db.VarChar(500)
  isActive                    Boolean     @default(true)
  isFeatured                  Boolean     @default(false)
  displayOrder                Int         @default(0)
  createdAt                   DateTime    @default(now())
  updatedAt                   DateTime
  bookings                    bookings[]
  cities                      cities[]
  hospitals                   hospitals[]
  packages                    packages[]
  states                      states[]

  @@index([countryName])
  @@index([isActive])
  @@index([isFeatured])
  @@index([iso2Code])
  @@index([slug])
}

model coupons {
  couponId           String   @id @db.Uuid
  code               String   @unique @db.VarChar(50)
  name               String   @db.VarChar(255)
  description        String?
  discountType       String   @db.VarChar(20)
  discountValue      Decimal  @db.Decimal(10, 2)
  maxDiscountAmount  Decimal? @db.Decimal(10, 2)
  minOrderAmount     Decimal? @db.Decimal(10, 2)
  validFrom          DateTime @db.Date
  validTo            DateTime @db.Date
  isActive           Boolean  @default(true)
  totalUsageLimit    Int?
  usageCount         Int      @default(0)
  perUserLimit       Int      @default(1)
  applicableFor      Json?
  treatmentTypes     Json?
  hospitalIds        Json?
  countryIds         Json?
  userTypes          Json?
  excludedTreatments Json?
  excludedHospitals  Json?
  firstTimeUsersOnly Boolean  @default(false)
  createdBy          String?  @db.Uuid
  tags               Json?
  notes              String?
  createdAt          DateTime @default(now())
  updatedAt          DateTime

  @@index([code])
  @@index([isActive])
  @@index([validFrom, validTo])
}

model departments {
  departmentId     String         @id @db.Uuid
  hospitalId       String         @db.Uuid
  departmentName   String         @db.VarChar(255)
  departmentCode   String?        @db.VarChar(50)
  departmentType   String?        @db.VarChar(100)
  description      String?
  shortDescription String?        @db.VarChar(500)
  services         Json?
  specializations  Json?
  bedCount         Int            @default(0)
  icuBeds          Int            @default(0)
  emergencyBeds    Int            @default(0)
  facilities       Json?
  equipment        Json?
  headOfDepartment String?        @db.Uuid
  doctorCount      Int            @default(0)
  nurseCount       Int            @default(0)
  staffCount       Int            @default(0)
  phone            String?        @db.VarChar(20)
  email            String?        @db.VarChar(255)
  extension        String?        @db.VarChar(10)
  location         String?        @db.VarChar(255)
  floor            String?        @db.VarChar(50)
  isEmergency      Boolean        @default(false)
  is24x7           Boolean        @default(false)
  workingHours     Json?
  averageWaitTime  Int?
  treatmentCount   Int            @default(0)
  successRate      Decimal?       @db.Decimal(5, 2)
  isActive         Boolean        @default(true)
  displayOrder     Int            @default(0)
  createdAt        DateTime       @default(now())
  updatedAt        DateTime
  appointments     appointments[]
  bookings         bookings[]
  hospitals        hospitals      @relation(fields: [hospitalId], references: [hospitalId], onDelete: Cascade)

  @@index([departmentName])
  @@index([hospitalId])
  @@index([isActive])
}

model devices {
  deviceId             String     @id @db.Uuid
  userId               String     @db.Uuid
  deviceName           String?    @db.VarChar(255)
  deviceType           String?    @db.VarChar(50)
  deviceModel          String?    @db.VarChar(100)
  browser              String?    @db.VarChar(100)
  browserVersion       String?    @db.VarChar(50)
  os                   String?    @db.VarChar(100)
  osVersion            String?    @db.VarChar(50)
  ipAddress            String?    @db.VarChar(45)
  location             String?    @db.VarChar(255)
  city                 String?    @db.VarChar(100)
  country              String?    @db.VarChar(100)
  fingerprint          String?    @unique @db.VarChar(500)
  userAgent            String?
  screenResolution     String?    @db.VarChar(50)
  timezone             String?    @db.VarChar(100)
  language             String?    @db.VarChar(50)
  isTrusted            Boolean    @default(false)
  trustLevel           String?    @default("low") @db.VarChar(20)
  isBlocked            Boolean    @default(false)
  blockedAt            DateTime?
  blockedReason        String?
  firstUsedAt          DateTime   @default(now())
  lastUsedAt           DateTime   @default(now())
  usageCount           Int        @default(1)
  pushToken            String?    @db.VarChar(500)
  notificationsEnabled Boolean    @default(false)
  createdAt            DateTime   @default(now())
  updatedAt            DateTime
  users                users      @relation(fields: [userId], references: [userId], onDelete: Cascade)
  sessions             sessions[]

  @@index([fingerprint])
  @@index([isTrusted])
  @@index([userId])
}

model dna_kits {
  dnaKitId          String        @id @db.Uuid
  patientId         String        @db.Uuid
  orderedBy         String?       @db.Uuid
  kitNumber         String        @unique @db.VarChar(100)
  kitType           String        @db.VarChar(100)
  kitName           String        @db.VarChar(255)
  manufacturer      String?       @db.VarChar(255)
  status            String        @default("ordered") @db.VarChar(50)
  orderedAt         DateTime      @default(now())
  shippedAt         DateTime?
  deliveredAt       DateTime?
  sampleCollectedAt DateTime?
  receivedAtLabAt   DateTime?
  resultsReadyAt    DateTime?
  trackingNumber    String?       @db.VarChar(100)
  shippingCarrier   String?       @db.VarChar(100)
  shippingAddress   String?
  sampleType        String?       @db.VarChar(100)
  sampleId          String?       @db.VarChar(100)
  sampleQuality     String?       @db.VarChar(50)
  sampleNotes       String?
  testType          String?       @db.VarChar(255)
  testsIncluded     Json?
  laboratoryName    String?       @db.VarChar(255)
  labTechnician     String?       @db.VarChar(255)
  resultsUrl        String?       @db.VarChar(500)
  resultsDocument   String?       @db.VarChar(500)
  resultsSummary    String?
  findings          Json?
  recommendations   String?
  geneticMarkers    Json?
  riskFactors       Json?
  healthInsights    Json?
  ancestryInfo      Json?
  consentGiven      Boolean       @default(false)
  consentDate       DateTime?
  dataSharing       Boolean       @default(false)
  anonymized        Boolean       @default(false)
  kitPrice          Decimal       @db.Decimal(10, 2)
  shippingFee       Decimal       @default(0) @db.Decimal(10, 2)
  totalPrice        Decimal       @db.Decimal(10, 2)
  currency          String        @default("USD") @db.VarChar(3)
  isPaid            Boolean       @default(false)
  paymentId         String?       @db.Uuid
  notes             String?
  internalNotes     String?
  createdAt         DateTime      @default(now())
  updatedAt         DateTime
  laboratoryId      String?       @db.Uuid
  laboratories      laboratories? @relation(fields: [laboratoryId], references: [laboratoryId])
  patients          patients      @relation(fields: [patientId], references: [patientId], onDelete: Cascade)

  @@index([kitNumber])
  @@index([patientId])
  @@index([status])
}

model doctor_schedules {
  scheduleId                 String    @id @db.Uuid
  doctorId                   String    @db.Uuid
  hospitalId                 String?   @db.Uuid
  dayOfWeek                  Int
  startTime                  DateTime  @db.Time(6)
  endTime                    DateTime  @db.Time(6)
  slotDuration               Int       @default(30)
  maxPatients                Int       @default(20)
  currentBookings            Int       @default(0)
  isAvailable                Boolean   @default(true)
  isRecurring                Boolean   @default(true)
  effectiveFrom              DateTime  @db.Date
  effectiveTo                DateTime? @db.Date
  consultationType           String    @default("in-person") @db.VarChar(50)
  allowsOnlineConsultation   Boolean   @default(true)
  allowsInPersonConsultation Boolean   @default(true)
  breakStartTime             DateTime? @db.Time(6)
  breakEndTime               DateTime? @db.Time(6)
  hasBreak                   Boolean   @default(false)
  location                   String?   @db.VarChar(255)
  roomNumber                 String?   @db.VarChar(50)
  holidayDates               Json?
  blockedDates               Json?
  notes                      String?
  createdAt                  DateTime  @default(now())
  updatedAt                  DateTime
  doctors                    doctors   @relation(fields: [doctorId], references: [doctorId], onDelete: Cascade)

  @@index([dayOfWeek])
  @@index([doctorId])
  @@index([isAvailable])
}

model doctors {
  doctorId                   String             @id @db.Uuid
  userId                     String             @unique @db.Uuid
  hospitalId                 String?            @db.Uuid
  departmentId               String?            @db.Uuid
  specializationId           String?            @db.Uuid
  medicalLicenseNumber       String?            @unique @db.VarChar(100)
  licenseIssuingAuthority    String?            @db.VarChar(255)
  licenseIssueDate           DateTime?          @db.Date
  licenseExpiryDate          DateTime?          @db.Date
  qualifications             Json?
  degree                     String?            @db.VarChar(255)
  medicalSchool              String?            @db.VarChar(255)
  graduationYear             Int?
  certifications             Json?
  primarySpecialization      String?            @db.VarChar(255)
  secondarySpecializations   Json?
  areasOfExpertise           Json?
  treatmentTypes             Json?
  experienceYears            Int?
  previousWorkplaces         Json?
  currentHospital            String?            @db.VarChar(255)
  departmentName             String?            @db.VarChar(255)
  consultationFee            Decimal?           @db.Decimal(10, 2)
  followUpFee                Decimal?           @db.Decimal(10, 2)
  emergencyFee               Decimal?           @db.Decimal(10, 2)
  currency                   String             @default("USD") @db.VarChar(3)
  consultationDuration       Int                @default(30)
  availability               Json?
  workingDays                Json?
  workingHours               Json?
  timeZone                   String?            @db.VarChar(100)
  acceptsEmergencies         Boolean            @default(false)
  acceptsNewPatients         Boolean            @default(true)
  languagesSpoken            Json?
  primaryLanguage            String?            @db.VarChar(100)
  bio                        String?
  shortBio                   String?            @db.VarChar(500)
  achievements               Json?
  awards                     Json?
  publications               Json?
  research                   Json?
  rating                     Decimal?           @db.Decimal(3, 2)
  totalReviews               Int                @default(0)
  ratingBreakdown            Json?
  totalConsultations         Int                @default(0)
  totalPatients              Int                @default(0)
  successRate                Decimal?           @db.Decimal(5, 2)
  averageWaitTime            Int?
  clinicPhone                String?            @db.VarChar(20)
  clinicEmail                String?            @db.VarChar(255)
  clinicAddress              String?
  isVerified                 Boolean            @default(false)
  verifiedAt                 DateTime?
  verifiedBy                 String?            @db.Uuid
  verificationDocuments      Json?
  status                     String             @default("active") @db.VarChar(50)
  availabilityStatus         String?            @default("available") @db.VarChar(50)
  isAcceptingAppointments    Boolean            @default(true)
  medicalCouncilRegistration String?            @db.VarChar(100)
  councilName                String?            @db.VarChar(255)
  registrationYear           Int?
  insuranceAccepted          Json?
  insuranceProviders         Json?
  profileImage               String?            @db.VarChar(500)
  clinicImages               Json?
  videoIntro                 String?            @db.VarChar(500)
  slug                       String?            @unique @db.VarChar(255)
  createdAt                  DateTime           @default(now())
  updatedAt                  DateTime
  appointments               appointments[]
  consultations              consultations[]
  doctor_schedules           doctor_schedules[]
  specializations            specializations?   @relation(fields: [specializationId], references: [specializationId])
  users                      users              @relation(fields: [userId], references: [userId], onDelete: Cascade)
  expert_calls               expert_calls[]
  prescriptions              prescriptions[]

  @@index([hospitalId])
  @@index([isVerified])
  @@index([slug])
  @@index([specializationId])
  @@index([status])
  @@index([userId])
}

model documents {
  documentId        String    @id @db.Uuid
  userId            String    @db.Uuid
  bookingId         String?   @db.Uuid
  patientId         String?   @db.Uuid
  documentName      String    @db.VarChar(255)
  documentType      String    @db.VarChar(100)
  documentCategory  String?   @db.VarChar(100)
  description       String?
  fileName          String    @db.VarChar(255)
  fileUrl           String    @db.VarChar(500)
  fileSize          BigInt
  fileSizeReadable  String?   @db.VarChar(50)
  fileType          String    @db.VarChar(100)
  mimeType          String?   @db.VarChar(100)
  storageProvider   String?   @default("imagekit") @db.VarChar(50)
  storageKey        String?   @db.VarChar(500)
  storageBucket     String?   @db.VarChar(255)
  thumbnailUrl      String?   @db.VarChar(500)
  documentDate      DateTime? @db.Date
  expiryDate        DateTime? @db.Date
  documentNumber    String?   @db.VarChar(100)
  issuedBy          String?   @db.VarChar(255)
  issuedDate        DateTime? @db.Date
  isVerified        Boolean   @default(false)
  verifiedAt        DateTime?
  verifiedBy        String?   @db.Uuid
  verificationNotes String?
  isPublic          Boolean   @default(false)
  isConfidential    Boolean   @default(false)
  accessLevel       String?   @default("private") @db.VarChar(50)
  sharedWith        Json?
  status            String    @default("active") @db.VarChar(50)
  uploadStatus      String?   @default("completed") @db.VarChar(50)
  version           Int       @default(1)
  previousVersionId String?   @db.Uuid
  isProcessed       Boolean   @default(false)
  processedAt       DateTime?
  extractedText     String?
  extractedData     Json?
  tags              Json?
  notes             String?
  internalNotes     String?
  downloadCount     Int       @default(0)
  lastDownloadedAt  DateTime?
  uploadedAt        DateTime  @default(now())
  createdAt         DateTime  @default(now())
  updatedAt         DateTime
  bookings          bookings? @relation(fields: [bookingId], references: [bookingId])
  users             users     @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([bookingId])
  @@index([documentType])
  @@index([isVerified])
  @@index([status])
  @@index([userId])
}

model email_confirmations {
  confirmationId       String    @id @db.Uuid
  userId               String    @db.Uuid
  email                String    @db.VarChar(255)
  emailType            String?   @default("verification") @db.VarChar(50)
  token                String    @unique @db.VarChar(500)
  tokenHash            String?   @db.VarChar(500)
  expiresAt            DateTime
  confirmedAt          DateTime?
  verificationAttempts Int       @default(0)
  lastAttemptAt        DateTime?
  resendCount          Int       @default(0)
  lastResentAt         DateTime?
  status               String    @default("pending") @db.VarChar(50)
  ipAddress            String?   @db.VarChar(45)
  userAgent            String?
  createdAt            DateTime  @default(now())
  updatedAt            DateTime
  users                users     @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([email])
  @@index([expiresAt])
  @@index([status])
  @@index([token])
  @@index([userId])
}

model email_logs {
  emailLogId        String    @id @db.Uuid
  userId            String?   @db.Uuid
  toEmail           String    @db.VarChar(255)
  fromEmail         String    @db.VarChar(255)
  ccEmails          Json?
  bccEmails         Json?
  subject           String    @db.VarChar(500)
  body              String
  htmlBody          String?
  templateName      String?   @db.VarChar(100)
  templateVariables Json?
  attachments       Json?
  attachmentCount   Int       @default(0)
  status            String    @default("pending") @db.VarChar(50)
  sentAt            DateTime?
  deliveredAt       DateTime?
  openedAt          DateTime?
  clickedAt         DateTime?
  bouncedAt         DateTime?
  messageId         String?   @unique @db.VarChar(255)
  externalId        String?   @db.VarChar(255)
  provider          String?   @default("smtp") @db.VarChar(50)
  deliveryAttempts  Int       @default(0)
  lastAttemptAt     DateTime?
  errorMessage      String?
  errorCode         String?   @db.VarChar(50)
  openCount         Int       @default(0)
  clickCount        Int       @default(0)
  category          String?   @db.VarChar(100)
  tags              Json?
  priority          String?   @default("normal") @db.VarChar(20)
  createdAt         DateTime  @default(now())
  updatedAt         DateTime
  users             users?    @relation(fields: [userId], references: [userId])

  @@index([createdAt])
  @@index([status])
  @@index([toEmail])
  @@index([userId])
}

model expert_calls {
  callId              String    @id @db.Uuid
  bookingId           String    @db.Uuid
  expertId            String?   @db.Uuid
  scheduledAt         DateTime?
  scheduleTime        String?   @db.VarChar(50)
  scheduleTimeZone    String?   @db.VarChar(50)
  estimatedDuration   Int       @default(30)
  remindedAt          DateTime?
  startedAt           DateTime?
  completedAt         DateTime?
  status              String    @default("pending") @db.VarChar(50)
  callType            String    @default("video") @db.VarChar(50)
  actualDuration      Int?
  meetingLink         String?   @db.VarChar(500)
  phoneNumber         String?   @db.VarChar(20)
  phonePin            String?   @db.VarChar(50)
  recordingUrl        String?   @db.VarChar(500)
  recordingConsent    Boolean   @default(false)
  notes               String?
  expertNotes         String?
  patientFeedback     String?
  findings            Json?
  diagnosis           String?
  recommendations     Json?
  nextSteps           Json?
  prescriptions       Json?
  testsRecommended    Json?
  attachments         Json?
  followUpRequired    Boolean   @default(false)
  followUpDate        DateTime?
  followUpType        String?   @db.VarChar(50)
  cancellationReason  String?
  cancelledAt         DateTime?
  cancelledBy         String?   @db.VarChar(50)
  rescheduledFrom     String?   @db.Uuid
  noShowReason        String?
  patientResponded    Boolean   @default(false)
  automaticReschedule Boolean   @default(false)
  expertRating        Decimal?  @db.Decimal(3, 2)
  patientRating       Decimal?  @db.Decimal(3, 2)
  patientReview       String?
  ipAddress           String?   @db.VarChar(45)
  deviceInfo          Json?
  reminderId          String?   @db.Uuid
  createdAt           DateTime  @default(now())
  updatedAt           DateTime
  userId              String?   @db.Uuid
  bookings            bookings  @relation(fields: [bookingId], references: [bookingId], onDelete: Cascade)
  doctors             doctors?  @relation(fields: [expertId], references: [doctorId])
  users               users?    @relation(fields: [userId], references: [userId])

  @@index([bookingId])
  @@index([expertId])
  @@index([scheduledAt])
  @@index([status])
}

model family_members {
  familyMemberId          String    @id @db.Uuid
  primaryUserId           String    @db.Uuid
  patientId               String?   @unique @db.Uuid
  firstName               String    @db.VarChar(100)
  lastName                String    @db.VarChar(100)
  relationship            String    @db.VarChar(50)
  dateOfBirth             DateTime? @db.Date
  age                     Int?
  gender                  String?   @db.VarChar(20)
  bloodType               String?   @db.VarChar(10)
  phone                   String?   @db.VarChar(20)
  email                   String?   @db.VarChar(255)
  allergies               Json?
  chronicConditions       Json?
  currentMedications      Json?
  medicalHistory          Json?
  disabilities            Json?
  profilePicture          String?   @db.VarChar(500)
  idProof                 String?   @db.VarChar(500)
  medicalDocuments        Json?
  canBookTreatment        Boolean   @default(true)
  isEmergencyContact      Boolean   @default(false)
  requiresGuardianConsent Boolean   @default(false)
  isActive                Boolean   @default(true)
  isVerified              Boolean   @default(false)
  notes                   String?
  createdAt               DateTime  @default(now())
  updatedAt               DateTime
  patients                patients? @relation(fields: [patientId], references: [patientId])
  users                   users     @relation(fields: [primaryUserId], references: [userId], onDelete: Cascade)

  @@index([isActive])
  @@index([patientId])
  @@index([primaryUserId])
}

model faq_votes {
  voteId    String   @id @db.Uuid
  faqId     String   @db.Uuid
  userId    String?  @db.Uuid
  voteType  String   @db.VarChar(20)
  ipAddress String?  @db.VarChar(45)
  userAgent String?
  createdAt DateTime @default(now())
  faqs      faqs     @relation(fields: [faqId], references: [faqId], onDelete: Cascade)

  @@unique([faqId, ipAddress])
  @@unique([faqId, userId])
  @@index([faqId])
  @@index([userId])
}

model faqs {
  faqId           String      @id @db.Uuid
  question        String
  answer          String
  shortAnswer     String?     @db.VarChar(500)
  category        String      @db.VarChar(100)
  subcategory     String?     @db.VarChar(100)
  tags            Json?
  relatedTo       String?     @db.VarChar(100)
  treatmentId     String?     @db.Uuid
  hospitalId      String?     @db.Uuid
  countryId       String?     @db.Uuid
  displayOrder    Int         @default(0)
  isActive        Boolean     @default(true)
  isFeatured      Boolean     @default(false)
  viewCount       Int         @default(0)
  helpfulCount    Int         @default(0)
  notHelpfulCount Int         @default(0)
  createdBy       String?     @db.Uuid
  lastEditedBy    String?     @db.Uuid
  lastEditedAt    DateTime?
  slug            String?     @unique @db.VarChar(255)
  metaTitle       String?     @db.VarChar(255)
  metaDescription String?     @db.VarChar(500)
  createdAt       DateTime    @default(now())
  updatedAt       DateTime
  faq_votes       faq_votes[]

  @@index([category])
  @@index([isActive])
  @@index([isFeatured])
  @@index([slug])
}

model feature_addons {
  addOnId          String            @id @db.Uuid
  name             String            @db.VarChar(255)
  code             String?           @unique @db.VarChar(50)
  description      String?
  shortDescription String?           @db.VarChar(500)
  category         String?           @db.VarChar(100)
  type             String            @db.VarChar(50)
  price            Decimal           @db.Decimal(12, 2)
  currency         String            @default("USD") @db.VarChar(3)
  isActive         Boolean           @default(true)
  isFeatured       Boolean           @default(false)
  isPopular        Boolean           @default(false)
  availability     String            @default("always") @db.VarChar(50)
  maxQuantity      Int?
  duration         Int?
  durationUnit     String?           @db.VarChar(20)
  icon             String?           @db.VarChar(255)
  imageUrl         String?           @db.VarChar(500)
  inclusions       Json?
  restrictions     Json?
  terms            String?
  displayOrder     Int               @default(0)
  metadata         Json?
  createdAt        DateTime          @default(now())
  updatedAt        DateTime
  booking_add_ons  booking_add_ons[]

  @@index([category])
  @@index([code])
  @@index([isActive])
}

model flights {
  flightId             String    @id @db.Uuid
  bookingId            String    @db.Uuid
  userId               String    @db.Uuid
  flightType           String    @db.VarChar(50)
  flightNumber         String?   @db.VarChar(50)
  airline              String?   @db.VarChar(255)
  departureAirport     String    @db.VarChar(100)
  departureAirportCode String?   @db.VarChar(10)
  arrivalAirport       String    @db.VarChar(100)
  arrivalAirportCode   String?   @db.VarChar(10)
  departureDate        DateTime  @db.Date
  departureTime        String?   @db.VarChar(20)
  arrivalDate          DateTime? @db.Date
  arrivalTime          String?   @db.VarChar(20)
  duration             Int?
  class                String?   @db.VarChar(50)
  seatNumber           String?   @db.VarChar(20)
  bookingReference     String?   @db.VarChar(100)
  pnr                  String?   @db.VarChar(100)
  price                Decimal?  @db.Decimal(12, 2)
  currency             String    @default("USD") @db.VarChar(3)
  status               String    @default("pending") @db.VarChar(50)
  ticketUrl            String?   @db.VarChar(500)
  eTicketNumber        String?   @db.VarChar(100)
  baggageAllowance     String?   @db.VarChar(100)
  specialRequests      String?
  passengerName        String?   @db.VarChar(255)
  passengerEmail       String?   @db.VarChar(255)
  passengerPhone       String?   @db.VarChar(20)
  checkInUrl           String?   @db.VarChar(500)
  boardingPass         String?   @db.VarChar(500)
  cancelledAt          DateTime?
  cancellationReason   String?
  refundAmount         Decimal?  @db.Decimal(12, 2)
  notes                String?
  metadata             Json?
  createdAt            DateTime  @default(now())
  updatedAt            DateTime
  bookings             bookings  @relation(fields: [bookingId], references: [bookingId], onDelete: Cascade)

  @@index([bookingId])
  @@index([departureDate])
  @@index([status])
  @@index([userId])
}

model google_meet_integrations {
  meetingId          String    @id @db.Uuid
  appointmentId      String?   @db.Uuid
  consultationId     String?   @db.Uuid
  expertCallId       String?   @db.Uuid
  userId             String    @db.Uuid
  meetLink           String    @db.VarChar(500)
  meetingCode        String?   @db.VarChar(50)
  scheduledStartTime DateTime
  scheduledEndTime   DateTime?
  actualStartTime    DateTime?
  actualEndTime      DateTime?
  duration           Int?
  status             String    @default("scheduled") @db.VarChar(50)
  hostUserId         String?   @db.Uuid
  participantIds     Json?
  recordingUrl       String?   @db.VarChar(500)
  recordingConsent   Boolean   @default(false)
  transcriptUrl      String?   @db.VarChar(500)
  calendarEventId    String?   @db.VarChar(255)
  googleCredentials  Json?
  refreshToken       String?
  accessToken        String?
  tokenExpiresAt     DateTime?
  notes              String?
  metadata           Json?
  createdAt          DateTime  @default(now())
  updatedAt          DateTime

  @@index([appointmentId])
  @@index([consultationId])
  @@index([expertCallId])
  @@index([status])
  @@index([userId])
}

model hospitals {
  hospitalId                      String           @id @db.Uuid
  countryId                       String           @db.Uuid
  cityId                          String           @db.Uuid
  hospitalName                    String           @db.VarChar(255)
  hospitalType                    String?          @db.VarChar(100)
  establishedYear                 Int?
  registrationNumber              String?          @db.VarChar(100)
  accreditations                  Json?
  certifications                  Json?
  awards                          Json?
  isJCIAccredited                 Boolean          @default(false)
  isNABHAccredited                Boolean          @default(false)
  phone                           String?          @db.VarChar(20)
  alternatePhone                  String?          @db.VarChar(20)
  email                           String?          @db.VarChar(255)
  website                         String?          @db.VarChar(255)
  fax                             String?          @db.VarChar(20)
  address                         String
  street                          String?          @db.VarChar(255)
  city                            String?          @db.VarChar(100)
  state                           String?          @db.VarChar(100)
  postalCode                      String?          @db.VarChar(20)
  landmark                        String?          @db.VarChar(255)
  latitude                        Decimal?         @db.Decimal(10, 8)
  longitude                       Decimal?         @db.Decimal(11, 8)
  timezone                        String?          @db.VarChar(100)
  description                     String?
  shortDescription                String?          @db.VarChar(500)
  missionStatement                String?
  visionStatement                 String?
  bedCount                        Int              @default(0)
  icuBeds                         Int              @default(0)
  emergencyBeds                   Int              @default(0)
  operationTheaters               Int              @default(0)
  totalArea                       Decimal?         @db.Decimal(10, 2)
  parkingSpaces                   Int              @default(0)
  amenities                       Json?
  facilities                      Json?
  equipment                       Json?
  technologies                    Json?
  specialties                     Json?
  centerOfExcellence              Json?
  totalDoctors                    Int              @default(0)
  totalNurses                     Int              @default(0)
  totalStaff                      Int              @default(0)
  internationalPatientCoordinator Boolean          @default(false)
  services                        Json?
  emergencyServices               Boolean          @default(true)
  ambulanceService                Boolean          @default(true)
  pharmacyService                 Boolean          @default(true)
  labService                      Boolean          @default(true)
  bloodBank                       Boolean          @default(false)
  diagnosticCenter                Boolean          @default(true)
  acceptsInternationalPatients    Boolean          @default(true)
  languagesSupported              Json?
  interpreterService              Boolean          @default(false)
  visaAssistance                  Boolean          @default(false)
  airportPickup                   Boolean          @default(false)
  accommodationAssistance         Boolean          @default(false)
  insuranceAccepted               Json?
  cashlessInsurance               Boolean          @default(false)
  paymentMethods                  Json?
  acceptsCreditCard               Boolean          @default(true)
  acceptsInternationalCards       Boolean          @default(true)
  currenciesAccepted              Json?
  workingHours                    Json?
  emergencyHours                  String?          @db.VarChar(100)
  isOpen24x7                      Boolean          @default(false)
  rating                          Decimal?         @db.Decimal(3, 2)
  totalReviews                    Int              @default(0)
  ratingBreakdown                 Json?
  totalTreatments                 Int              @default(0)
  successRate                     Decimal?         @db.Decimal(5, 2)
  patientSatisfaction             Decimal?         @db.Decimal(5, 2)
  averageCostSaving               Decimal?         @db.Decimal(5, 2)
  logo                            String?          @db.VarChar(500)
  images                          Json?
  videos                          Json?
  virtualTour                     String?          @db.VarChar(500)
  facebookUrl                     String?          @db.VarChar(255)
  twitterUrl                      String?          @db.VarChar(255)
  instagramUrl                    String?          @db.VarChar(255)
  linkedinUrl                     String?          @db.VarChar(255)
  youtubeUrl                      String?          @db.VarChar(255)
  slug                            String           @unique @db.VarChar(255)
  metaTitle                       String?          @db.VarChar(255)
  metaDescription                 String?          @db.VarChar(500)
  metaKeywords                    String?          @db.VarChar(500)
  isVerified                      Boolean          @default(false)
  verifiedAt                      DateTime?
  verifiedBy                      String?          @db.Uuid
  isActive                        Boolean          @default(true)
  isFeatured                      Boolean          @default(false)
  displayOrder                    Int              @default(0)
  createdAt                       DateTime         @default(now())
  updatedAt                       DateTime
  accommodations                  accommodations[]
  appointments                    appointments[]
  bookings                        bookings[]
  consultations                   consultations[]
  departments                     departments[]
  cities                          cities           @relation(fields: [cityId], references: [cityId], onDelete: Cascade)
  countries                       countries        @relation(fields: [countryId], references: [countryId], onDelete: Cascade)
  invoices                        invoices[]
  laboratories                    laboratories[]
  packages                        packages[]

  @@index([cityId])
  @@index([countryId])
  @@index([isActive])
  @@index([isFeatured])
  @@index([isVerified])
  @@index([slug])
}

model immunizations {
  immunizationId        String    @id @db.Uuid
  patientId             String    @db.Uuid
  vaccineName           String    @db.VarChar(255)
  vaccineType           String?   @db.VarChar(100)
  manufacturer          String?   @db.VarChar(255)
  batchNumber           String?   @db.VarChar(100)
  lotNumber             String?   @db.VarChar(100)
  administeredDate      DateTime  @db.Date
  administeredBy        String?   @db.VarChar(255)
  administrationSite    String?   @db.VarChar(100)
  routeOfAdministration String?   @db.VarChar(100)
  dosage                String?   @db.VarChar(100)
  doseNumber            Int?
  totalDosesRequired    Int?
  facilityName          String?   @db.VarChar(255)
  facilityAddress       String?
  nextDoseDate          DateTime? @db.Date
  nextDoseReminder      Boolean   @default(false)
  reminderSentAt        DateTime?
  adverseReaction       Boolean   @default(false)
  reactionDetails       String?
  reactionSeverity      String?   @db.VarChar(50)
  certificateNumber     String?   @db.VarChar(100)
  certificateUrl        String?   @db.VarChar(500)
  documentUrl           String?   @db.VarChar(500)
  validFrom             DateTime? @db.Date
  validUntil            DateTime? @db.Date
  isValid               Boolean   @default(true)
  notes                 String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime
  patients              patients  @relation(fields: [patientId], references: [patientId], onDelete: Cascade)

  @@index([administeredDate])
  @@index([patientId])
  @@index([vaccineName])
}

model insurance_documents {
  id                    Int         @id @default(autoincrement())
  bookingId             String      @db.Uuid
  patientId             String      @db.Uuid
  insuranceProviderName String      @db.VarChar(255)
  policyNumber          String      @db.VarChar(255)
  groupNumber           String?     @db.VarChar(255)
  memberId              String?     @db.VarChar(255)
  coverageType          String      @default("partial") @db.VarChar(50)
  coverageAmount        Decimal?    @db.Decimal(12, 2)
  deductible            Decimal?    @db.Decimal(12, 2)
  coInsurancePercentage Decimal?    @db.Decimal(5, 2)
  documentUrl           String      @db.VarChar(500)
  documentType          String      @db.VarChar(100)
  fileName              String      @db.VarChar(255)
  fileSize              Int?
  fileId                String?     @db.VarChar(255)
  validFrom             DateTime?   @db.Date
  validTo               DateTime?   @db.Date
  verificationStatus    String      @default("pending") @db.VarChar(50)
  verificationNotes     String?
  created_at            DateTime    @default(now())
  updated_at            DateTime
  insuranceId           String?     @db.Uuid
  bookings              bookings    @relation(fields: [bookingId], references: [bookingId], onDelete: Cascade)
  insurances            insurances? @relation(fields: [insuranceId], references: [insuranceId])
  patients              patients    @relation(fields: [patientId], references: [patientId], onDelete: Cascade)

  @@index([bookingId])
  @@index([patientId])
}

model insurances {
  insuranceId           String                @id @db.Uuid
  userId                String                @db.Uuid
  patientId             String?               @db.Uuid
  providerName          String                @db.VarChar(255)
  providerCode          String?               @db.VarChar(100)
  providerPhone         String?               @db.VarChar(20)
  providerEmail         String?               @db.VarChar(255)
  providerWebsite       String?               @db.VarChar(255)
  policyNumber          String                @unique @db.VarChar(100)
  policyType            String                @db.VarChar(100)
  policyName            String?               @db.VarChar(255)
  groupNumber           String?               @db.VarChar(100)
  policyHolderName      String                @db.VarChar(255)
  policyHolderRelation  String?               @db.VarChar(50)
  policyHolderDOB       DateTime?             @db.Date
  coverageType          String?               @db.VarChar(100)
  coverageAmount        Decimal?              @db.Decimal(12, 2)
  deductible            Decimal?              @db.Decimal(10, 2)
  copay                 Decimal?              @db.Decimal(10, 2)
  coinsurance           Decimal?              @db.Decimal(5, 2)
  outOfPocketMax        Decimal?              @db.Decimal(12, 2)
  currency              String                @default("USD") @db.VarChar(3)
  coverageDetails       Json?
  coveredServices       Json?
  excludedServices      Json?
  limitations           Json?
  startDate             DateTime              @db.Date
  endDate               DateTime              @db.Date
  isActive              Boolean               @default(true)
  renewalDate           DateTime?             @db.Date
  networkType           String?               @db.VarChar(50)
  networkProviders      Json?
  isInNetwork           Boolean               @default(true)
  requiresPreAuth       Boolean               @default(false)
  preAuthNumber         String?               @db.VarChar(100)
  preAuthDate           DateTime?
  preAuthExpiry         DateTime?
  claimAddress          String?
  claimPhone            String?               @db.VarChar(20)
  claimEmail            String?               @db.VarChar(255)
  claimSubmissionMethod String?               @db.VarChar(50)
  isVerified            Boolean               @default(false)
  verifiedAt            DateTime?
  verifiedBy            String?               @db.Uuid
  verificationNotes     String?
  lastVerificationDate  DateTime?
  insuranceCardFront    String?               @db.VarChar(500)
  insuranceCardBack     String?               @db.VarChar(500)
  policyDocument        String?               @db.VarChar(500)
  memberServicePhone    String?               @db.VarChar(20)
  memberServiceEmail    String?               @db.VarChar(255)
  notes                 String?
  internalNotes         String?
  createdAt             DateTime              @default(now())
  updatedAt             DateTime
  insurance_documents   insurance_documents[]
  users                 users                 @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([isActive])
  @@index([isVerified])
  @@index([policyNumber])
  @@index([userId])
}

model invoices {
  invoiceId           String         @id @db.Uuid
  bookingId           String         @db.Uuid
  userId              String         @db.Uuid
  hospitalId          String?        @db.Uuid
  paymentId           Int?
  invoiceNumber       String         @unique @db.VarChar(255)
  invoiceDate         DateTime       @db.Date
  dueDate             DateTime?      @db.Date
  status              String         @default("draft") @db.VarChar(50)
  type                String         @default("invoice") @db.VarChar(50)
  billTo              Json
  shipTo              Json?
  billFrom            Json?
  lineItems           Json
  itemCount           Int            @default(0)
  subtotal            Decimal        @db.Decimal(12, 2)
  taxable             Decimal?       @db.Decimal(12, 2)
  discount            Decimal        @default(0) @db.Decimal(10, 2)
  discountPercentage  Decimal?       @db.Decimal(5, 2)
  discountReason      String?        @db.VarChar(255)
  taxAmount           Decimal        @default(0) @db.Decimal(10, 2)
  taxRate             Decimal?       @db.Decimal(5, 2)
  shippingCharges     Decimal        @default(0) @db.Decimal(10, 2)
  otherCharges        Decimal        @default(0) @db.Decimal(10, 2)
  totalAmount         Decimal        @db.Decimal(12, 2)
  currency            String         @default("USD") @db.VarChar(3)
  amountPaid          Decimal        @default(0) @db.Decimal(12, 2)
  amountDue           Decimal?       @db.Decimal(12, 2)
  paymentTerms        String         @default("immediate") @db.VarChar(50)
  paymentMethod       String?        @db.VarChar(50)
  paymentDueDate      DateTime?      @db.Date
  sentAt              DateTime?
  viewedAt            DateTime?
  paidAt              DateTime?
  notes               String?
  internalNotes       String?
  purchaseOrderNumber String?        @db.VarChar(255)
  referenceNumber     String?        @db.VarChar(255)
  terms               String?
  taxId               String?        @db.VarChar(255)
  hsn                 Json?
  gst                 Json?
  invoicePdf          String?        @db.VarChar(500)
  attachment          String?        @db.VarChar(500)
  receipt             String?        @db.VarChar(500)
  createdBy           String?        @db.Uuid
  lastModifiedBy      String?        @db.Uuid
  modificationHistory Json?
  isArchived          Boolean        @default(false)
  isCancelled         Boolean        @default(false)
  cancellationReason  String?
  cancelledAt         DateTime?
  paymentReminderSent Boolean        @default(false)
  reminderSentAt      DateTime?
  dueReminderSent     Boolean        @default(false)
  overdueReminderSent Boolean        @default(false)
  tags                Json?
  metadata            Json?
  createdAt           DateTime       @default(now())
  updatedAt           DateTime
  appointments        appointments[]
  bookings            bookings       @relation(fields: [bookingId], references: [bookingId], onDelete: Cascade)
  hospitals           hospitals?     @relation(fields: [hospitalId], references: [hospitalId])
  payments            payments?      @relation(fields: [paymentId], references: [id])
  users               users          @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([bookingId])
  @@index([invoiceDate])
  @@index([status])
  @@index([userId])
}

model lab_reports {
  reportId       String        @id @db.Uuid
  patientId      String        @db.Uuid
  labTestId      String?       @db.Uuid
  laboratoryId   String?       @db.Uuid
  doctorId       String?       @db.Uuid
  bookingId      String?       @db.Uuid
  reportNumber   String        @unique @db.VarChar(100)
  testName       String        @db.VarChar(255)
  testType       String?       @db.VarChar(100)
  testDate       DateTime      @db.Date
  reportDate     DateTime?     @db.Date
  results        Json?
  normalRange    Json?
  interpretation String?
  fileUrl        String?       @db.VarChar(500)
  fileName       String?       @db.VarChar(255)
  status         String        @default("pending") @db.VarChar(50)
  priority       String        @default("routine") @db.VarChar(50)
  notes          String?
  isAbnormal     Boolean       @default(false)
  createdAt      DateTime      @default(now())
  updatedAt      DateTime
  lab_tests      lab_tests?    @relation(fields: [labTestId], references: [testId])
  laboratories   laboratories? @relation(fields: [laboratoryId], references: [laboratoryId])
  patients       patients      @relation(fields: [patientId], references: [patientId], onDelete: Cascade)

  @@index([labTestId])
  @@index([laboratoryId])
  @@index([patientId])
  @@index([reportNumber])
  @@index([status])
  @@index([testDate])
}

model lab_tests {
  testId                  String        @id @db.Uuid
  laboratoryId            String        @db.Uuid
  appointmentId           String?       @db.Uuid
  userId                  String?       @db.Uuid
  name                    String        @db.VarChar(150)
  code                    String?       @db.VarChar(50)
  type                    String?       @db.VarChar(100)
  category                String?       @db.VarChar(100)
  description             String?
  preparationRequired     Boolean       @default(false)
  preparationInstructions String?
  fastingRequired         Boolean       @default(false)
  fastingHours            Int?
  sampleQualityCheck      Boolean       @default(true)
  expectedTurnaroundDays  Int?
  expectedTurnaroundHours Int?
  priorityTurnaroundDays  Int?
  referenceRange          Json?
  referenceRangeUnit      String?       @db.VarChar(50)
  genderSpecific          Boolean       @default(false)
  ageSpecific             Boolean       @default(false)
  status                  String        @default("ordered") @db.VarChar(50)
  statusHistory           Json?
  result                  String?
  resultValue             Decimal?      @db.Decimal(12, 4)
  resultUnit              String?       @db.VarChar(50)
  resultInterpretation    String?       @db.VarChar(50)
  resultAbnormality       String?
  reportFile              String?       @db.VarChar(500)
  reportGeneratedAt       DateTime?
  reportVerifiedBy        String?       @db.Uuid
  reportVerifiedAt        DateTime?
  reportComments          String?
  internalNotes           String?
  tags                    Json?
  createdAt               DateTime      @default(now())
  updatedAt               DateTime
  lab_reports             lab_reports[]
  appointments            appointments? @relation(fields: [appointmentId], references: [appointmentId])
  laboratories            laboratories  @relation(fields: [laboratoryId], references: [laboratoryId], onDelete: Cascade)

  @@index([appointmentId])
  @@index([laboratoryId])
  @@index([status])
  @@index([userId])
}

model laboratories {
  laboratoryId   String        @id @db.Uuid
  hospitalId     String        @db.Uuid
  name           String        @db.VarChar(150)
  code           String?       @unique @db.VarChar(50)
  type           String?       @db.VarChar(100)
  description    String?
  accreditations Json?
  certifications Json?
  phone          String?       @db.VarChar(20)
  email          String?       @db.VarChar(255)
  address        String?
  city           String?       @db.VarChar(100)
  state          String?       @db.VarChar(100)
  postalCode     String?       @db.VarChar(20)
  workingHours   Json?
  is24x7         Boolean       @default(false)
  testCapacity   Int?
  equipment      Json?
  createdAt      DateTime      @default(now())
  updatedAt      DateTime
  dna_kits       dna_kits[]
  lab_reports    lab_reports[]
  lab_tests      lab_tests[]
  hospitals      hospitals     @relation(fields: [hospitalId], references: [hospitalId], onDelete: Cascade)

  @@index([hospitalId])
}

model media {
  mediaId          String   @id @db.Uuid
  filename         String   @db.VarChar(255)
  originalFilename String?  @db.VarChar(255)
  fileSize         Int
  mimeType         String   @db.VarChar(100)
  fileExtension    String?  @db.VarChar(10)
  url              String   @db.VarChar(500)
  storagePath      String?  @db.VarChar(500)
  storageProvider  String   @default("s3") @db.VarChar(50)
  storageKey       String?  @db.VarChar(500)
  type             String   @db.VarChar(50)
  category         String?  @db.VarChar(100)
  width            Int?
  height           Int?
  aspectRatio      String?  @db.VarChar(20)
  thumbnailUrl     String?  @db.VarChar(500)
  optimizedUrl     String?  @db.VarChar(500)
  duration         Int?
  videoCodec       String?  @db.VarChar(50)
  audioCodec       String?  @db.VarChar(50)
  uploadedBy       String?  @db.Uuid
  entityType       String?  @db.VarChar(50)
  entityId         String?  @db.Uuid
  title            String?  @db.VarChar(255)
  description      String?
  altText          String?  @db.VarChar(255)
  caption          String?
  metadata         Json?
  exif             Json?
  tags             Json?
  isPublic         Boolean  @default(false)
  isPrimary        Boolean  @default(false)
  displayOrder     Int      @default(0)
  isActive         Boolean  @default(true)
  createdAt        DateTime @default(now())
  updatedAt        DateTime

  @@index([category])
  @@index([entityType, entityId])
  @@index([uploadedBy])
}

model medical_documents {
  documentId        String    @id @db.Uuid
  patientId         String    @db.Uuid
  uploadedBy        String?   @db.Uuid
  bookingId         String?   @db.Uuid
  appointmentId     String?   @db.Uuid
  documentType      String    @db.VarChar(100)
  documentCategory  String?   @db.VarChar(100)
  documentName      String    @db.VarChar(255)
  documentNumber    String?   @db.VarChar(100)
  description       String?
  fileName          String    @db.VarChar(255)
  fileUrl           String    @db.VarChar(500)
  fileSize          BigInt
  fileType          String    @db.VarChar(100)
  mimeType          String?   @db.VarChar(100)
  storageProvider   String?   @default("imagekit") @db.VarChar(50)
  storageKey        String?   @db.VarChar(500)
  thumbnailUrl      String?   @db.VarChar(500)
  issueDate         DateTime? @db.Date
  expiryDate        DateTime? @db.Date
  issuedBy          String?   @db.VarChar(255)
  issuingAuthority  String?   @db.VarChar(255)
  isVerified        Boolean   @default(false)
  verifiedAt        DateTime?
  verifiedBy        String?   @db.Uuid
  verificationNotes String?
  status            String    @default("active") @db.VarChar(50)
  isConfidential    Boolean   @default(true)
  accessLevel       String    @default("private") @db.VarChar(50)
  sharedWith        Json?
  tags              Json?
  notes             String?
  metadata          Json?
  version           Int       @default(1)
  previousVersionId String?   @db.Uuid
  isLatestVersion   Boolean   @default(true)
  downloadCount     Int       @default(0)
  lastDownloadedAt  DateTime?
  uploadedAt        DateTime  @default(now())
  createdAt         DateTime  @default(now())
  updatedAt         DateTime
  patients          patients  @relation(fields: [patientId], references: [patientId], onDelete: Cascade)

  @@index([bookingId])
  @@index([documentType])
  @@index([isVerified])
  @@index([patientId])
  @@index([status])
}

model medical_records {
  recordId             String   @id @db.Uuid
  patientId            String   @db.Uuid
  doctorId             String?  @db.Uuid
  appointmentId        String?  @db.Uuid
  bookingId            String?  @db.Uuid
  recordType           String   @db.VarChar(100)
  recordDate           DateTime @db.Date
  title                String   @db.VarChar(255)
  description          String?
  chiefComplaint       String?
  presentIllness       String?
  medicalHistory       String?
  familyHistory        String?
  socialHistory        String?
  allergies            Json?
  currentMedications   Json?
  vitalSigns           Json?
  physicalExamination  String?
  diagnosis            String?
  treatmentPlan        String?
  prescriptions        Json?
  labTests             Json?
  imaging              Json?
  procedures           Json?
  followUpInstructions String?
  doctorNotes          String?
  clinicalNotes        String?
  isConfidential       Boolean  @default(true)
  accessLevel          String   @default("private") @db.VarChar(50)
  sharedWith           Json?
  attachments          Json?
  status               String   @default("active") @db.VarChar(50)
  createdAt            DateTime @default(now())
  updatedAt            DateTime
  patients             patients @relation(fields: [patientId], references: [patientId], onDelete: Cascade)

  @@index([appointmentId])
  @@index([bookingId])
  @@index([doctorId])
  @@index([patientId])
  @@index([recordDate])
}

model medical_reviews {
  reviewId               String    @id @db.Uuid
  patientId              String    @db.Uuid
  doctorId               String?   @db.Uuid
  appointmentId          String?   @db.Uuid
  bookingId              String?   @db.Uuid
  hospitalId             String?   @db.Uuid
  treatmentId            String?   @db.Uuid
  reviewType             String    @db.VarChar(50)
  rating                 Int
  title                  String?   @db.VarChar(255)
  review                 String?
  pros                   String?
  cons                   String?
  medicalOutcome         String?
  treatmentEffectiveness Int?
  hospitalCleanliness    Int?
  staffBehavior          Int?
  facilityQuality        Int?
  valueForMoney          Int?
  waitTime               Int?
  wouldRecommend         Boolean?
  verificationStatus     String    @default("pending") @db.VarChar(50)
  verifiedAt             DateTime?
  verifiedBy             String?   @db.Uuid
  isPublished            Boolean   @default(false)
  publishedAt            DateTime?
  helpfulCount           Int       @default(0)
  reportedCount          Int       @default(0)
  moderationNotes        String?
  images                 Json?
  videos                 Json?
  metadata               Json?
  createdAt              DateTime  @default(now())
  updatedAt              DateTime

  @@index([doctorId])
  @@index([hospitalId])
  @@index([patientId])
  @@index([rating])
  @@index([verificationStatus])
}

model notification_preferences {
  preferenceId String   @id @db.Uuid
  userId       String   @db.Uuid
  channel      String   @db.VarChar(50)
  category     String   @db.VarChar(100)
  isEnabled    Boolean  @default(true)
  frequency    String?  @default("realtime") @db.VarChar(50)
  schedule     Json?
  metadata     Json?
  createdAt    DateTime @default(now())
  updatedAt    DateTime

  @@unique([userId, channel, category])
  @@index([userId])
}

model notifications {
  notificationId String    @id @db.Uuid
  userId         String    @db.Uuid
  type           String    @db.VarChar(100)
  category       String?   @db.VarChar(100)
  title          String    @db.VarChar(255)
  message        String
  data           Json?
  entityType     String?   @db.VarChar(50)
  entityId       String?   @db.Uuid
  actionUrl      String?   @db.VarChar(500)
  actionType     String?   @db.VarChar(50)
  actionLabel    String?   @db.VarChar(100)
  priority       String    @default("normal") @db.VarChar(20)
  channel        String    @default("in-app") @db.VarChar(50)
  isRead         Boolean   @default(false)
  readAt         DateTime?
  isArchived     Boolean   @default(false)
  archivedAt     DateTime?
  sentViaEmail   Boolean   @default(false)
  sentViaSMS     Boolean   @default(false)
  sentViaPush    Boolean   @default(false)
  metadata       Json?
  expiresAt      DateTime?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime
  users          users     @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([createdAt])
  @@index([isRead])
  @@index([type])
  @@index([userId])
}

model packages {
  packageId          String     @id @db.Uuid
  treatmentId        String     @db.Uuid
  hospitalId         String     @db.Uuid
  countryId          String?    @db.Uuid
  cityId             String?    @db.Uuid
  packageName        String     @db.VarChar(255)
  packageCode        String?    @unique @db.VarChar(50)
  description        String?
  shortDescription   String?    @db.VarChar(500)
  duration           Int?
  durationUnit       String?    @default("days") @db.VarChar(20)
  basePrice          Decimal    @db.Decimal(12, 2)
  discountedPrice    Decimal?   @db.Decimal(12, 2)
  currency           String     @default("USD") @db.VarChar(3)
  inclusions         Json?
  exclusions         Json?
  procedures         Json?
  accommodation      Json?
  meals              Json?
  transportation     Json?
  visaAssistance     Boolean    @default(false)
  airportPickup      Boolean    @default(false)
  followUpCare       Boolean    @default(false)
  interpreterService Boolean    @default(false)
  status             String     @default("active") @db.VarChar(50)
  isPopular          Boolean    @default(false)
  isFeatured         Boolean    @default(false)
  displayOrder       Int        @default(0)
  images             Json?
  bookingsCount      Int        @default(0)
  rating             Decimal?   @db.Decimal(3, 2)
  reviewsCount       Int        @default(0)
  createdAt          DateTime   @default(now())
  updatedAt          DateTime
  bookings           bookings[]
  cities             cities?    @relation(fields: [cityId], references: [cityId])
  countries          countries? @relation(fields: [countryId], references: [countryId])
  hospitals          hospitals  @relation(fields: [hospitalId], references: [hospitalId], onDelete: Cascade)
  treatments         treatments @relation(fields: [treatmentId], references: [treatmentId], onDelete: Cascade)

  @@index([hospitalId])
  @@index([isPopular])
  @@index([status])
  @@index([treatmentId])
}

model password_resets {
  resetId       String    @id @db.Uuid
  userId        String    @db.Uuid
  token         String    @unique @db.VarChar(500)
  tokenHash     String?   @db.VarChar(500)
  expiresAt     DateTime
  email         String    @db.VarChar(255)
  ipAddress     String?   @db.VarChar(45)
  userAgent     String?
  requestMethod String    @default("email") @db.VarChar(20)
  status        String    @default("pending") @db.VarChar(50)
  usedAt        DateTime?
  createdAt     DateTime  @default(now())
  users         users     @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([expiresAt])
  @@index([status])
  @@index([token])
  @@index([userId])
}

model patient_documents {
  documentId       String    @id @db.Uuid
  patientId        String    @db.Uuid
  uploadedBy       String?   @db.Uuid
  documentType     String    @db.VarChar(100)
  documentCategory String?   @db.VarChar(100)
  documentName     String    @db.VarChar(255)
  fileName         String    @db.VarChar(255)
  fileUrl          String    @db.VarChar(500)
  fileSize         BigInt
  fileType         String    @db.VarChar(100)
  mimeType         String?   @db.VarChar(100)
  storageProvider  String?   @default("imagekit") @db.VarChar(50)
  storageKey       String?   @db.VarChar(500)
  thumbnailUrl     String?   @db.VarChar(500)
  issueDate        DateTime? @db.Date
  expiryDate       DateTime? @db.Date
  isVerified       Boolean   @default(false)
  verifiedAt       DateTime?
  verifiedBy       String?   @db.Uuid
  status           String    @default("active") @db.VarChar(50)
  isConfidential   Boolean   @default(true)
  accessLevel      String    @default("private") @db.VarChar(50)
  tags             Json?
  notes            String?
  metadata         Json?
  version          Int       @default(1)
  isLatestVersion  Boolean   @default(true)
  downloadCount    Int       @default(0)
  lastDownloadedAt DateTime?
  uploadedAt       DateTime  @default(now())
  createdAt        DateTime  @default(now())
  updatedAt        DateTime

  @@index([documentType])
  @@index([patientId])
  @@index([status])
}

model patient_treatment_plans {
  planId      String      @id @db.Uuid
  patientId   String      @db.Uuid
  doctorId    String?     @db.Uuid
  treatmentId String?     @db.Uuid
  bookingId   String?     @db.Uuid
  planName    String      @db.VarChar(255)
  description String?
  goals       Json?
  procedures  Json?
  medications Json?
  lifestyle   Json?
  diet        Json?
  exercise    Json?
  followUps   Json?
  startDate   DateTime    @db.Date
  endDate     DateTime?   @db.Date
  duration    Int?
  status      String      @default("active") @db.VarChar(50)
  progress    Decimal?    @db.Decimal(5, 2)
  notes       String?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime
  patients    patients    @relation(fields: [patientId], references: [patientId], onDelete: Cascade)
  treatments  treatments? @relation(fields: [treatmentId], references: [treatmentId])

  @@index([doctorId])
  @@index([patientId])
  @@index([status])
}

model patients {
  patientId                String                    @id @db.Uuid
  userId                   String                    @unique @db.Uuid
  bloodType                String?                   @db.VarChar(20)
  height                   Decimal?                  @db.Decimal(5, 2)
  weight                   Decimal?                  @db.Decimal(5, 2)
  bmi                      Decimal?                  @db.Decimal(5, 2)
  allergies                Json?
  chronicConditions        Json?
  familyMedicalHistory     Json?
  surgicalHistory          Json?
  currentMedications       Json?
  pastMedications          Json?
  smoker                   Boolean?
  alcoholUser              Boolean?
  exerciseFrequency        String?                   @db.VarChar(50)
  preferredLanguage        String                    @default("en") @db.VarChar(10)
  preferredGenderOfDoctor  String                    @default("nopreference") @db.VarChar(20)
  hasInsurance             Boolean                   @default(false)
  emergencyContactName     String?                   @db.VarChar(255)
  emergencyContactPhone    String?                   @db.VarChar(20)
  emergencyContactRelation String?                   @db.VarChar(50)
  totalConsultations       Int                       @default(0)
  totalTreatments          Int                       @default(0)
  totalHospitals           Int                       @default(0)
  isActive                 Boolean                   @default(true)
  createdAt                DateTime                  @default(now())
  updatedAt                DateTime
  bookings                 bookings[]
  comorbid_conditions      comorbid_conditions[]
  consultations            consultations[]
  dna_kits                 dna_kits[]
  family_members           family_members?
  immunizations            immunizations[]
  insurance_documents      insurance_documents[]
  lab_reports              lab_reports[]
  medical_documents        medical_documents[]
  medical_records          medical_records[]
  patient_treatment_plans  patient_treatment_plans[]
  users                    users                     @relation(fields: [userId], references: [userId], onDelete: Cascade)
  prescriptions            prescriptions[]
  vital_signs              vital_signs[]

  @@index([isActive])
  @@index([userId])
}

model payments {
  id             Int              @id @default(autoincrement())
  bookingId      String           @db.Uuid
  patientId      String           @db.Uuid
  amount         Decimal          @db.Decimal(12, 2)
  currency       String           @default("INR") @db.VarChar(3)
  gateway        String           @db.VarChar(50)
  transactionId  String           @unique @db.VarChar(255)
  paymentStatus  String           @default("pending") @db.VarChar(50)
  paymentMethod  String?          @db.VarChar(50)
  paymentDetails Json?
  receiptUrl     String?          @db.VarChar(500)
  errorMessage   String?
  completedAt    DateTime?
  created_at     DateTime         @default(now())
  updated_at     DateTime
  accommodations accommodations[]
  appointments   appointments[]
  invoices       invoices[]
  bookings       bookings         @relation(fields: [bookingId], references: [bookingId], onDelete: Cascade)
  users          users            @relation(fields: [patientId], references: [userId], onDelete: Cascade)

  @@index([bookingId])
  @@index([patientId])
  @@index([paymentStatus])
}

model prescriptions {
  prescriptionId     String        @id @db.Uuid
  appointmentId      String?       @unique @db.Uuid
  userId             String        @db.Uuid
  patientId          String        @db.Uuid
  doctorId           String?       @db.Uuid
  hospitalId         String?       @db.Uuid
  prescriptionNumber String        @unique @db.VarChar(100)
  type               String        @default("medication") @db.VarChar(50)
  status             String        @default("draft") @db.VarChar(50)
  medications        Json
  dosageInstructions String?
  frequency          String?       @db.VarChar(50)
  duration           Int?
  durationUnit       String        @default("days") @db.VarChar(20)
  refillsAllowed     Int           @default(0)
  refillsUsed        Int           @default(0)
  validFrom          DateTime      @db.Date
  validUntil         DateTime?     @db.Date
  notes              String?
  isActive           Boolean       @default(true)
  createdAt          DateTime      @default(now())
  updatedAt          DateTime
  appointments       appointments?
  doctors            doctors?      @relation(fields: [doctorId], references: [doctorId])
  patients           patients      @relation(fields: [patientId], references: [patientId], onDelete: Cascade)
  users              users         @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([appointmentId])
  @@index([doctorId])
  @@index([patientId])
  @@index([prescriptionNumber])
  @@index([status])
  @@index([userId])
}

model privacy_policies {
  policyId      String    @id @db.Uuid
  version       String    @db.VarChar(50)
  title         String    @db.VarChar(255)
  content       String
  effectiveDate DateTime  @db.Date
  expiryDate    DateTime? @db.Date
  isActive      Boolean   @default(false)
  isCurrent     Boolean   @default(false)
  language      String    @default("en") @db.VarChar(10)
  publishedAt   DateTime?
  publishedBy   String?   @db.Uuid
  approvedBy    String?   @db.Uuid
  approvedAt    DateTime?
  summary       String?
  changes       String?
  metadata      Json?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime

  @@unique([version, language])
  @@index([effectiveDate])
  @@index([isActive])
  @@index([isCurrent])
}

model profiles {
  profileId          String    @id @db.Uuid
  userId             String    @unique @db.Uuid
  bio                String?
  headline           String?   @db.VarChar(255)
  website            String?   @db.VarChar(500)
  socialLinks        Json?
  languages          Json?
  timezone           String?   @db.VarChar(100)
  nationality        String?   @db.VarChar(100)
  passportNumber     String?   @db.VarChar(100)
  passportExpiry     DateTime? @db.Date
  emergencyContact   Json?
  medicalHistory     Json?
  allergies          Json?
  currentMedications Json?
  bloodType          String?   @db.VarChar(10)
  insuranceInfo      Json?
  preferences        Json?
  privacy            Json?
  metadata           Json?
  createdAt          DateTime  @default(now())
  updatedAt          DateTime

  @@index([userId])
}

model ratings {
  ratingId         String    @id @db.Uuid
  userId           String    @db.Uuid
  entityType       String    @db.VarChar(50)
  entityId         String    @db.Uuid
  rating           Decimal   @db.Decimal(3, 2)
  maxRating        Decimal   @default(5.00) @db.Decimal(3, 2)
  ratingDimensions Json?
  comment          String?
  isVerified       Boolean   @default(false)
  verifiedAt       DateTime?
  metadata         Json?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime

  @@unique([userId, entityType, entityId])
  @@index([entityType, entityId])
  @@index([rating])
  @@index([userId])
}

model refresh_tokens {
  tokenId       String    @id @db.Uuid
  userId        String    @db.Uuid
  token         String    @unique @db.VarChar(500)
  deviceId      String?   @db.Uuid
  ipAddress     String?   @db.VarChar(45)
  userAgent     String?
  expiresAt     DateTime
  isRevoked     Boolean   @default(false)
  revokedAt     DateTime?
  revokedBy     String?   @db.Uuid
  revokedReason String?   @db.VarChar(255)
  replacedBy    String?   @db.Uuid
  createdAt     DateTime  @default(now())

  @@index([expiresAt])
  @@index([token])
  @@index([userId])
}

model refunds {
  refundId        String    @id @db.Uuid
  bookingId       String    @db.Uuid
  userId          String    @db.Uuid
  paymentId       String?   @db.Uuid
  amount          Decimal   @db.Decimal(12, 2)
  currency        String    @default("USD") @db.VarChar(3)
  reason          String
  status          String    @default("pending") @db.VarChar(50)
  refundMethod    String?   @db.VarChar(50)
  gatewayRefundId String?   @db.VarChar(255)
  processedBy     String?   @db.Uuid
  processedAt     DateTime?
  notes           String?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime
  bookings        bookings  @relation(fields: [bookingId], references: [bookingId], onDelete: Cascade)

  @@index([bookingId])
  @@index([status])
  @@index([userId])
}

model reviews {
  reviewId        String    @id @db.Uuid
  userId          String    @db.Uuid
  entityType      String    @db.VarChar(50)
  entityId        String    @db.Uuid
  rating          Int
  title           String?   @db.VarChar(255)
  comment         String?
  pros            String?
  cons            String?
  isVerified      Boolean   @default(false)
  verifiedAt      DateTime?
  isAnonymous     Boolean   @default(false)
  helpfulCount    Int       @default(0)
  unhelpfulCount  Int       @default(0)
  status          String    @default("pending") @db.VarChar(50)
  moderatedBy     String?   @db.Uuid
  moderatedAt     DateTime?
  moderationNotes String?
  isPublished     Boolean   @default(false)
  publishedAt     DateTime?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime
  users           users     @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([entityType, entityId])
  @@index([rating])
  @@index([status])
  @@index([userId])
}

model sessions {
  sessionId      String   @id @db.Uuid
  userId         String   @db.Uuid
  token          String   @unique @db.VarChar(500)
  refreshToken   String?  @unique @db.VarChar(500)
  ipAddress      String?  @db.VarChar(45)
  userAgent      String?
  deviceId       String?  @db.Uuid
  deviceName     String?  @db.VarChar(255)
  deviceType     String?  @db.VarChar(50)
  browser        String?  @db.VarChar(100)
  os             String?  @db.VarChar(100)
  location       String?  @db.VarChar(255)
  isActive       Boolean  @default(true)
  expiresAt      DateTime
  lastActivityAt DateTime @default(now())
  createdAt      DateTime @default(now())
  updatedAt      DateTime
  devices        devices? @relation(fields: [deviceId], references: [deviceId])
  users          users    @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([deviceId])
  @@index([expiresAt])
  @@index([isActive])
  @@index([token])
  @@index([userId])
}

model settings {
  settingId   String   @id @db.Uuid
  userId      String?  @db.Uuid
  category    String   @db.VarChar(100)
  key         String   @db.VarChar(255)
  value       String?
  valueType   String   @default("string") @db.VarChar(50)
  isPublic    Boolean  @default(false)
  isEditable  Boolean  @default(true)
  description String?
  metadata    Json?
  createdAt   DateTime @default(now())
  updatedAt   DateTime

  @@unique([userId, category, key])
  @@index([category])
  @@index([key])
  @@index([userId])
}

model sms_logs {
  smsId        String    @id @db.Uuid
  userId       String?   @db.Uuid
  recipient    String    @db.VarChar(20)
  countryCode  String?   @db.VarChar(10)
  message      String
  smsType      String    @db.VarChar(50)
  provider     String?   @db.VarChar(50)
  providerId   String?   @db.VarChar(255)
  status       String    @default("pending") @db.VarChar(50)
  sentAt       DateTime?
  deliveredAt  DateTime?
  failedAt     DateTime?
  errorMessage String?
  cost         Decimal?  @db.Decimal(10, 4)
  currency     String?   @default("USD") @db.VarChar(3)
  metadata     Json?
  createdAt    DateTime  @default(now())

  @@index([recipient])
  @@index([sentAt])
  @@index([status])
  @@index([userId])
}

model specializations {
  specializationId String    @id @db.Uuid
  name             String    @unique @db.VarChar(255)
  code             String?   @unique @db.VarChar(50)
  description      String?
  category         String?   @db.VarChar(100)
  parentId         String?   @db.Uuid
  isActive         Boolean   @default(true)
  displayOrder     Int       @default(0)
  icon             String?   @db.VarChar(255)
  imageUrl         String?   @db.VarChar(500)
  createdAt        DateTime  @default(now())
  updatedAt        DateTime
  doctors          doctors[]

  @@index([isActive])
  @@index([parentId])
}

model states {
  stateId      String    @id @db.Uuid
  countryId    String    @db.Uuid
  name         String    @db.VarChar(255)
  code         String?   @db.VarChar(10)
  latitude     Decimal?  @db.Decimal(10, 8)
  longitude    Decimal?  @db.Decimal(11, 8)
  isActive     Boolean   @default(true)
  displayOrder Int       @default(0)
  createdAt    DateTime  @default(now())
  updatedAt    DateTime
  cities       cities[]
  countries    countries @relation(fields: [countryId], references: [countryId], onDelete: Cascade)

  @@unique([countryId, name])
  @@index([countryId])
  @@index([isActive])
}

model subscription_plans {
  planId               String          @id @db.Uuid
  name                 String          @db.VarChar(255)
  code                 String          @unique @db.VarChar(50)
  description          String?
  shortDescription     String?         @db.VarChar(500)
  type                 String          @db.VarChar(50)
  billingCycle         String          @db.VarChar(50)
  price                Decimal         @db.Decimal(12, 2)
  currency             String          @default("USD") @db.VarChar(3)
  trialPeriodDays      Int?
  features             Json
  limitations          Json?
  maxUsers             Int?
  maxBookings          Int?
  prioritySupport      Boolean         @default(false)
  telemedicineAccess   Boolean         @default(false)
  familyMembersAllowed Int?
  discountPercentage   Decimal?        @db.Decimal(5, 2)
  isActive             Boolean         @default(true)
  isFeatured           Boolean         @default(false)
  isPopular            Boolean         @default(false)
  displayOrder         Int             @default(0)
  metadata             Json?
  createdAt            DateTime        @default(now())
  updatedAt            DateTime
  subscriptions        subscriptions[]

  @@index([code])
  @@index([isActive])
}

model subscriptions {
  subscriptionId     String             @id @db.Uuid
  userId             String             @db.Uuid
  planId             String             @db.Uuid
  status             String             @default("active") @db.VarChar(50)
  startDate          DateTime           @db.Date
  endDate            DateTime?          @db.Date
  currentPeriodStart DateTime           @db.Date
  currentPeriodEnd   DateTime           @db.Date
  trialStart         DateTime?          @db.Date
  trialEnd           DateTime?          @db.Date
  cancelledAt        DateTime?
  cancellationReason String?
  pausedAt           DateTime?
  resumedAt          DateTime?
  billingCycle       String             @default("monthly") @db.VarChar(50)
  amount             Decimal            @db.Decimal(12, 2)
  currency           String             @default("USD") @db.VarChar(3)
  paymentMethod      String?            @db.VarChar(50)
  autoRenew          Boolean            @default(true)
  renewalCount       Int                @default(0)
  lastRenewedAt      DateTime?
  nextBillingDate    DateTime?
  gracePeriodEndsAt  DateTime?
  metadata           Json?
  createdAt          DateTime           @default(now())
  updatedAt          DateTime
  subscription_plans subscription_plans @relation(fields: [planId], references: [planId])

  @@index([nextBillingDate])
  @@index([planId])
  @@index([status])
  @@index([userId])
}

model support_tickets {
  ticketId          String    @id @db.Uuid
  userId            String    @db.Uuid
  ticketNumber      String    @unique @db.VarChar(50)
  subject           String    @db.VarChar(255)
  description       String
  category          String    @db.VarChar(100)
  priority          String    @default("medium") @db.VarChar(20)
  status            String    @default("open") @db.VarChar(50)
  assignedTo        String?   @db.Uuid
  relatedEntityType String?   @db.VarChar(50)
  relatedEntityId   String?   @db.Uuid
  resolution        String?
  resolvedAt        DateTime?
  closedAt          DateTime?
  tags              Json?
  attachments       Json?
  metadata          Json?
  createdAt         DateTime  @default(now())
  updatedAt         DateTime
  users             users     @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([category])
  @@index([priority])
  @@index([status])
  @@index([ticketNumber])
  @@index([userId])
}

model terms_conditions {
  termsId       String    @id @db.Uuid
  version       String    @db.VarChar(50)
  title         String    @db.VarChar(255)
  content       String
  effectiveDate DateTime  @db.Date
  expiryDate    DateTime? @db.Date
  isActive      Boolean   @default(false)
  isCurrent     Boolean   @default(false)
  language      String    @default("en") @db.VarChar(10)
  publishedAt   DateTime?
  publishedBy   String?   @db.Uuid
  approvedBy    String?   @db.Uuid
  approvedAt    DateTime?
  summary       String?
  changes       String?
  metadata      Json?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime

  @@unique([version, language])
  @@index([effectiveDate])
  @@index([isActive])
  @@index([isCurrent])
}

model trains {
  trainId              String    @id @db.Uuid
  bookingId            String    @db.Uuid
  userId               String    @db.Uuid
  trainNumber          String?   @db.VarChar(50)
  trainName            String?   @db.VarChar(255)
  departureStation     String    @db.VarChar(255)
  departureStationCode String?   @db.VarChar(10)
  arrivalStation       String    @db.VarChar(255)
  arrivalStationCode   String?   @db.VarChar(10)
  departureDate        DateTime  @db.Date
  departureTime        String?   @db.VarChar(20)
  arrivalDate          DateTime? @db.Date
  arrivalTime          String?   @db.VarChar(20)
  duration             Int?
  class                String?   @db.VarChar(50)
  coach                String?   @db.VarChar(20)
  seatNumber           String?   @db.VarChar(20)
  berth                String?   @db.VarChar(20)
  pnr                  String?   @db.VarChar(50)
  bookingReference     String?   @db.VarChar(100)
  price                Decimal?  @db.Decimal(12, 2)
  currency             String    @default("INR") @db.VarChar(3)
  status               String    @default("pending") @db.VarChar(50)
  ticketUrl            String?   @db.VarChar(500)
  eTicketNumber        String?   @db.VarChar(100)
  passengerName        String?   @db.VarChar(255)
  passengerAge         Int?
  passengerGender      String?   @db.VarChar(10)
  foodPreference       String?   @db.VarChar(50)
  cancelledAt          DateTime?
  cancellationReason   String?
  refundAmount         Decimal?  @db.Decimal(12, 2)
  notes                String?
  metadata             Json?
  createdAt            DateTime  @default(now())
  updatedAt            DateTime
  bookings             bookings  @relation(fields: [bookingId], references: [bookingId], onDelete: Cascade)

  @@index([bookingId])
  @@index([departureDate])
  @@index([status])
  @@index([userId])
}

model transactions {
  transactionId        String    @id @db.Uuid
  userId               String    @db.Uuid
  bookingId            String?   @db.Uuid
  paymentId            String?   @db.Uuid
  type                 String    @db.VarChar(50)
  amount               Decimal   @db.Decimal(12, 2)
  currency             String    @default("USD") @db.VarChar(3)
  status               String    @default("pending") @db.VarChar(50)
  gateway              String?   @db.VarChar(50)
  gatewayTransactionId String?   @db.VarChar(255)
  paymentMethod        String?   @db.VarChar(50)
  description          String?
  metadata             Json?
  failureReason        String?
  processedAt          DateTime?
  createdAt            DateTime  @default(now())
  updatedAt            DateTime
  users                users     @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([bookingId])
  @@index([paymentId])
  @@index([status])
  @@index([type])
  @@index([userId])
}

model translations {
  translationId    String    @id @db.Uuid
  key              String    @db.VarChar(255)
  language         String    @db.VarChar(10)
  value            String
  context          String?   @db.VarChar(100)
  category         String?   @db.VarChar(100)
  isActive         Boolean   @default(true)
  isAutoTranslated Boolean   @default(false)
  translatedBy     String?   @db.Uuid
  verifiedBy       String?   @db.Uuid
  verifiedAt       DateTime?
  metadata         Json?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime

  @@unique([key, language])
  @@index([category])
  @@index([key])
  @@index([language])
}

model travel_arrangements {
  arrangementId      String    @id @db.Uuid
  bookingId          String    @db.Uuid
  userId             String    @db.Uuid
  arrangementType    String    @db.VarChar(50)
  provider           String?   @db.VarChar(255)
  bookingReference   String?   @db.VarChar(100)
  details            Json
  origin             String?   @db.VarChar(255)
  destination        String?   @db.VarChar(255)
  departureDate      DateTime? @db.Date
  departureTime      String?   @db.VarChar(20)
  arrivalDate        DateTime? @db.Date
  arrivalTime        String?   @db.VarChar(20)
  pickupLocation     String?   @db.VarChar(500)
  dropoffLocation    String?   @db.VarChar(500)
  pickupTime         String?   @db.VarChar(20)
  vehicleType        String?   @db.VarChar(100)
  driverName         String?   @db.VarChar(255)
  driverPhone        String?   @db.VarChar(20)
  price              Decimal?  @db.Decimal(12, 2)
  currency           String    @default("USD") @db.VarChar(3)
  status             String    @default("pending") @db.VarChar(50)
  confirmedAt        DateTime?
  completedAt        DateTime?
  cancelledAt        DateTime?
  cancellationReason String?
  notes              String?
  specialRequests    String?
  metadata           Json?
  createdAt          DateTime  @default(now())
  updatedAt          DateTime
  bookings           bookings  @relation(fields: [bookingId], references: [bookingId], onDelete: Cascade)

  @@index([arrangementType])
  @@index([bookingId])
  @@index([status])
  @@index([userId])
}

model treatment_categories {
  categoryId              String                    @id @db.Uuid
  name                    String                    @unique @db.VarChar(255)
  code                    String?                   @unique @db.VarChar(50)
  description             String?
  icon                    String?                   @db.VarChar(255)
  imageUrl                String?                   @db.VarChar(500)
  isActive                Boolean                   @default(true)
  displayOrder            Int                       @default(0)
  slug                    String                    @unique @db.VarChar(255)
  metaTitle               String?                   @db.VarChar(255)
  metaDescription         String?                   @db.VarChar(500)
  createdAt               DateTime                  @default(now())
  updatedAt               DateTime
  treatment_subcategories treatment_subcategories[]
  treatments              treatments[]

  @@index([isActive])
  @@index([slug])
}

model treatment_subcategories {
  subcategoryId        String               @id @db.Uuid
  categoryId           String               @db.Uuid
  name                 String               @db.VarChar(255)
  code                 String?              @db.VarChar(50)
  description          String?
  icon                 String?              @db.VarChar(255)
  imageUrl             String?              @db.VarChar(500)
  isActive             Boolean              @default(true)
  displayOrder         Int                  @default(0)
  slug                 String               @unique @db.VarChar(255)
  createdAt            DateTime             @default(now())
  updatedAt            DateTime
  treatment_categories treatment_categories @relation(fields: [categoryId], references: [categoryId], onDelete: Cascade)
  treatments           treatments[]

  @@unique([categoryId, name])
  @@index([categoryId])
  @@index([isActive])
  @@index([slug])
}

model treatments {
  treatmentId             String                    @id @db.Uuid
  categoryId              String?                   @db.Uuid
  subcategoryId           String?                   @db.Uuid
  name                    String                    @db.VarChar(255)
  code                    String?                   @unique @db.VarChar(50)
  description             String?
  shortDescription        String?                   @db.VarChar(500)
  duration                Int?
  durationUnit            String?                   @default("days") @db.VarChar(20)
  complexity              String?                   @db.VarChar(50)
  successRate             Decimal?                  @db.Decimal(5, 2)
  recoveryTime            Int?
  minPrice                Decimal?                  @db.Decimal(12, 2)
  maxPrice                Decimal?                  @db.Decimal(12, 2)
  avgPrice                Decimal?                  @db.Decimal(12, 2)
  currency                String                    @default("USD") @db.VarChar(3)
  isActive                Boolean                   @default(true)
  isFeatured              Boolean                   @default(false)
  isPopular               Boolean                   @default(false)
  displayOrder            Int                       @default(0)
  images                  Json?
  videos                  Json?
  slug                    String                    @unique @db.VarChar(255)
  metaTitle               String?                   @db.VarChar(255)
  metaDescription         String?                   @db.VarChar(500)
  metaKeywords            String?                   @db.VarChar(500)
  bookingsCount           Int                       @default(0)
  viewsCount              Int                       @default(0)
  rating                  Decimal?                  @db.Decimal(3, 2)
  reviewsCount            Int                       @default(0)
  createdAt               DateTime                  @default(now())
  updatedAt               DateTime
  bookings                bookings[]
  packages                packages[]
  patient_treatment_plans patient_treatment_plans[]
  treatment_categories    treatment_categories?     @relation(fields: [categoryId], references: [categoryId])
  treatment_subcategories treatment_subcategories?  @relation(fields: [subcategoryId], references: [subcategoryId])

  @@index([categoryId])
  @@index([isActive])
  @@index([isFeatured])
  @@index([slug])
  @@index([subcategoryId])
}

model user_acceptances {
  acceptanceId    String   @id @db.Uuid
  userId          String   @db.Uuid
  documentType    String   @db.VarChar(50)
  documentId      String   @db.Uuid
  documentVersion String   @db.VarChar(50)
  acceptedAt      DateTime @default(now())
  ipAddress       String?  @db.VarChar(45)
  userAgent       String?
  consentGiven    Boolean  @default(true)
  metadata        Json?
  createdAt       DateTime @default(now())

  @@unique([userId, documentType, documentVersion])
  @@index([acceptedAt])
  @@index([documentType])
  @@index([userId])
}

model users {
  userId                                                  String                @id @db.Uuid
  email                                                   String                @unique @db.VarChar(255)
  password                                                String                @db.VarChar(255)
  role                                                    String                @default("patient") @db.VarChar(50)
  firstName                                               String                @db.VarChar(100)
  lastName                                                String                @db.VarChar(100)
  phone                                                   String?               @db.VarChar(20)
  countryCode                                             String?               @db.VarChar(10)
  dateOfBirth                                             DateTime?             @db.Date
  gender                                                  String?               @db.VarChar(20)
  profilePicture                                          String?               @db.VarChar(500)
  address                                                 String?
  city                                                    String?               @db.VarChar(100)
  state                                                   String?               @db.VarChar(100)
  country                                                 String?               @db.VarChar(100)
  postalCode                                              String?               @db.VarChar(20)
  isEmailVerified                                         Boolean               @default(false)
  isPhoneVerified                                         Boolean               @default(false)
  emailVerifiedAt                                         DateTime?
  phoneVerifiedAt                                         DateTime?
  twoFactorEnabled                                        Boolean               @default(false)
  twoFactorSecret                                         String?               @db.VarChar(255)
  isActive                                                Boolean               @default(true)
  isDeleted                                               Boolean               @default(false)
  lastLoginAt                                             DateTime?
  lastLoginIp                                             String?               @db.VarChar(45)
  loginAttempts                                           Int                   @default(0)
  lockedUntil                                             DateTime?
  preferences                                             Json?
  metadata                                                Json?
  referralCode                                            String?               @unique @db.VarChar(50)
  referredBy                                              String?               @db.Uuid
  createdAt                                               DateTime              @default(now())
  updatedAt                                               DateTime
  accommodations                                          accommodations[]
  appointments                                            appointments[]
  audit_logs                                              audit_logs[]
  bookings                                                bookings[]
  chat_conversations_chat_conversations_receiverIdTousers chat_conversations[]  @relation("chat_conversations_receiverIdTousers")
  chat_conversations_chat_conversations_senderIdTousers   chat_conversations[]  @relation("chat_conversations_senderIdTousers")
  chat_messages                                           chat_messages[]
  companions                                              companions[]
  consultations                                           consultations[]
  devices                                                 devices[]
  doctors                                                 doctors?
  documents                                               documents[]
  email_confirmations                                     email_confirmations[]
  email_logs                                              email_logs[]
  expert_calls                                            expert_calls[]
  family_members                                          family_members[]
  insurances                                              insurances[]
  invoices                                                invoices[]
  notifications                                           notifications[]
  password_resets                                         password_resets[]
  patients                                                patients?
  payments                                                payments[]
  prescriptions                                           prescriptions[]
  reviews                                                 reviews[]
  sessions                                                sessions[]
  support_tickets                                         support_tickets[]
  transactions                                            transactions[]

  @@index([email])
  @@index([isActive])
  @@index([referralCode])
  @@index([role])
}

model vital_signs {
  vitalSignId            String   @id @db.Uuid
  patientId              String   @db.Uuid
  appointmentId          String?  @db.Uuid
  recordedBy             String?  @db.Uuid
  temperature            Decimal? @db.Decimal(4, 1)
  temperatureUnit        String?  @default("C") @db.VarChar(1)
  bloodPressureSystolic  Int?
  bloodPressureDiastolic Int?
  heartRate              Int?
  respiratoryRate        Int?
  oxygenSaturation       Decimal? @db.Decimal(5, 2)
  height                 Decimal? @db.Decimal(5, 2)
  heightUnit             String?  @default("cm") @db.VarChar(2)
  weight                 Decimal? @db.Decimal(5, 2)
  weightUnit             String?  @default("kg") @db.VarChar(2)
  bmi                    Decimal? @db.Decimal(5, 2)
  bloodGlucose           Decimal? @db.Decimal(5, 2)
  painLevel              Int?
  notes                  String?
  recordedAt             DateTime @default(now())
  createdAt              DateTime @default(now())
  updatedAt              DateTime
  patients               patients @relation(fields: [patientId], references: [patientId], onDelete: Cascade)

  @@index([appointmentId])
  @@index([patientId])
  @@index([recordedAt])
}

model website_contents {
  contentId      String    @id @db.Uuid
  key            String    @unique @db.VarChar(255)
  title          String    @db.VarChar(500)
  content        String
  contentType    String    @db.VarChar(50)
  language       String    @default("en") @db.VarChar(10)
  section        String?   @db.VarChar(100)
  category       String?   @db.VarChar(100)
  tags           Json?
  metadata       Json?
  seoTitle       String?   @db.VarChar(255)
  seoDescription String?   @db.VarChar(500)
  seoKeywords    String?   @db.VarChar(500)
  slug           String?   @unique @db.VarChar(255)
  imageUrl       String?   @db.VarChar(500)
  videoUrl       String?   @db.VarChar(500)
  isPublished    Boolean   @default(false)
  publishedAt    DateTime?
  publishedBy    String?   @db.Uuid
  displayOrder   Int       @default(0)
  viewCount      Int       @default(0)
  lastViewedAt   DateTime?
  createdBy      String?   @db.Uuid
  updatedBy      String?   @db.Uuid
  createdAt      DateTime  @default(now())
  updatedAt      DateTime

  @@index([contentType])
  @@index([isPublished])
  @@index([key])
  @@index([section])
}

model wishlists {
  wishlistId String   @id @db.Uuid
  userId     String   @db.Uuid
  entityType String   @db.VarChar(50)
  entityId   String   @db.Uuid
  notes      String?
  priority   Int      @default(0)
  createdAt  DateTime @default(now())
  updatedAt  DateTime

  @@unique([userId, entityType, entityId])
  @@index([entityType, entityId])
  @@index([userId])
}

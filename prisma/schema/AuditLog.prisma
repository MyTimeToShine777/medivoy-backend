model AuditLog {
  auditLogId              String    @id @default(uuid()) @db.Uuid
  
  // RELATIONSHIPS
  userId                  String?   @db.Uuid
  
  // ACTION DETAILS
  action                  String    @db.VarChar(100)
  entity                  String?   @db.VarChar(100)
  entityId                String?   @db.Uuid
  
  // CHANGE TRACKING
  oldValues               Json?
  newValues               Json?
  changes                 Json?
  
  // REQUEST INFO
  ipAddress               String?   @db.VarChar(45)
  userAgent               String?   @db.Text
  requestMethod           String?   @db.VarChar(10)
  requestUrl              String?   @db.VarChar(500)
  requestBody             Json?
  responseStatus          Int?
  responseTime            Int?
  
  // METADATA
  metadata                Json?
  tags                    Json?
  severity                String?   @default("info") @db.VarChar(20)
  status                  String?   @db.VarChar(50)
  errorMessage            String?   @db.Text
  stackTrace              String?   @db.Text
  
  // SESSION INFO
  sessionId               String?   @db.Uuid
  deviceId                String?   @db.Uuid
  
  createdAt               DateTime  @default(now())
  
  // RELATIONS
  user                    User?     @relation(fields: [userId], references: [userId], onDelete: SetNull)
  
  @@index([userId])
  @@index([action])
  @@index([entity])
  @@index([entityId])
  @@index([createdAt])
  @@index([severity])
  @@map("audit_logs")
}

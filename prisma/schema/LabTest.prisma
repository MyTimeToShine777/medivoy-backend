model LabTest {
  testId                  String    @id @default(uuid()) @db.Uuid
  laboratoryId            String    @db.Uuid
  appointmentId           String?   @db.Uuid
  userId                  String?   @db.Uuid
  name                    String    @db.VarChar(150)
  code                    String?   @db.VarChar(50)
  type                    String?   @db.VarChar(100)
  category                String?   @db.VarChar(100)
  description             String?   @db.Text
  preparationRequired     Boolean   @default(false)
  preparationInstructions String?   @db.Text
  fastingRequired         Boolean   @default(false)
  fastingHours            Int?
  sampleQualityCheck      Boolean   @default(true)
  expectedTurnaroundDays  Int?
  expectedTurnaroundHours Int?
  priorityTurnaroundDays  Int?
  referenceRange          Json?
  referenceRangeUnit      String?   @db.VarChar(50)
  genderSpecific          Boolean   @default(false)
  ageSpecific             Boolean   @default(false)
  status                  String    @default("ordered") @db.VarChar(50)
  statusHistory           Json?
  result                  String?   @db.Text
  resultValue             Decimal?  @db.Decimal(12, 4)
  resultUnit              String?   @db.VarChar(50)
  resultInterpretation    String?   @db.VarChar(50)
  resultAbnormality       String?   @db.Text
  reportFile              String?   @db.VarChar(500)
  reportGeneratedAt       DateTime?
  reportVerifiedBy        String?   @db.Uuid
  reportVerifiedAt        DateTime?
  reportComments          String?   @db.Text
  internalNotes           String?   @db.Text
  tags                    Json?
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
  
  laboratory              Laboratory @relation(fields: [laboratoryId], references: [laboratoryId], onDelete: Cascade)
  appointment             Appointment? @relation(fields: [appointmentId], references: [appointmentId], onDelete: SetNull)
  labReports              LabReport[]
  
  @@index([laboratoryId])
  @@index([appointmentId])
  @@index([userId])
  @@index([status])
  @@map("lab_tests")
}

// Password Reset Model - Password reset tokens and requests
// NO optional chaining - Production Ready
model PasswordReset {
  // ========== PRIMARY KEY ==========
  resetId                 String    @id @default(uuid()) @db.Uuid
  
  // ========== FOREIGN KEYS ==========
  userId                  String    @db.Uuid
  
  // ========== TOKEN DETAILS ==========
  token                   String    @unique @db.VarChar(500)
  tokenHash               String?   @db.VarChar(500)    // Hashed version for extra security
  expiresAt               DateTime
  
  // ========== REQUEST DETAILS ==========
  email                   String    @db.VarChar(255)
  ipAddress               String?   @db.VarChar(45)
  userAgent               String?   @db.Text
  requestMethod           String    @default("email") @db.VarChar(20)  // email, sms, app
  
  // ========== STATUS ==========
  status                  String    @default("pending") @db.VarChar(50)  // pending, used, expired, cancelled
  usedAt                  DateTime?
  
  // ========== TIMESTAMPS ==========
  createdAt               DateTime  @default(now())
  
  // ========== RELATIONSHIPS ==========
  user                    User      @relation(fields: [userId], references: [userId], onDelete: Cascade)
  
  // ========== INDEXES ==========
  @@index([userId])
  @@index([token])
  @@index([status])
  @@index([expiresAt])
  
  // ========== TABLE MAPPING ==========
  @@map("password_resets")
}

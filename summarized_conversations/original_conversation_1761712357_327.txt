{'role': 'assistant', 'content': 'Let\'s fix the user.controller.js file:\n\n<function_calls>\n<full-file-rewrite file_path="src/controllers/user.controller.js">\nconst User = require(\'../models/User.model\');\nconst { successResponse, errorResponse } = require(\'../utils/response\');\nconst logger = require(\'../utils/logger\');\n\nclass UserController {\n  /**\n   * Create a new user\n   */\n  async createUser(req, res) {\n    try {\n      const { email, firstName, lastName, role, phone, isVerified } = req.body;\n      \n      // Create user\n      const user = await User.create({\n        email,\n        firstName,\n        lastName,\n        role,\n        phone,\n        isVerified,\n      });\n      \n      return successResponse(res, {\n        message: \'User created successfully\',\n        data: user,\n      }, 201);\n    } catch (error) {\n      logger.error(\'Create user error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to create user\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get user by ID\n   */\n  async getUser(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find user\n      const user = await User.findByPk(id);\n      \n      if (!user) {\n        return errorResponse(res, {\n          message: \'User not found\',\n        }, 404);\n      }\n      \n      return successResponse(res, {\n        message: \'User retrieved successfully\',\n        data: {\n          id: user.id,\n          email: user.email,\n          firstName: user.firstName,\n          lastName: user.lastName,\n          role: user.role,\n          phone: user.phone,\n          isVerified: user.isVerified,\n          lastLogin: user.lastLogin,\n          createdAt: user.createdAt,\n          updatedAt: user.updatedAt,\n        },\n      });\n    } catch (error) {\n      logger.error(\'Get user error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to retrieve user\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Update user\n   */\n  async updateUser(req, res) {\n    try {\n      const { id } = req.params;\n      const { firstName, lastName, role, phone, isVerified } = req.body;\n      \n      // Find user\n      const user = await User.findByPk(id);\n      \n      if (!user) {\n        return errorResponse(res, {\n          message: \'User not found\',\n        }, 404);\n      }\n      \n      // Update user\n      await user.update({\n        firstName,\n        lastName,\n        role,\n        phone,\n        isVerified,\n      });\n      \n      return successResponse(res, {\n        message: \'User updated successfully\',\n        data: {\n          id: user.id,\n          email: user.email,\n          firstName: user.firstName,\n          lastName: user.lastName,\n          role: user.role,\n          phone: user.phone,\n          isVerified: user.isVerified,\n          lastLogin: user.lastLogin,\n          createdAt: user.createdAt,\n          updatedAt: user.updatedAt,\n        },\n      });\n    } catch (error) {\n      logger.error(\'Update user error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to update user\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Delete user\n   */\n  async deleteUser(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find user\n      const user = await User.findByPk(id);\n      \n      if (!user) {\n        return errorResponse(res, {\n          message: \'User not found\',\n        }, 404);\n      }\n      \n      // Delete user\n      await user.destroy();\n      \n      return successResponse(res, {\n        message: \'User deleted successfully\',\n      });\n    } catch (error) {\n      logger.error(\'Delete user error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to delete user\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get all users\n   */\n  async getAllUsers(req, res) {\n    try {\n      const { page = 1, limit = 10, role, isVerified } = req.query;\n      \n      // Build where clause\n      const where = {};\n      if (role) where.role = role;\n      if (isVerified !== undefined) where.isVerified = isVerified === \'true\';\n      \n      // Get users with pagination\n      const users = await User.findAndCountAll({\n        where,\n        limit: parseInt(limit, 10),\n        offset: (parseInt(page, 10) - 1) * parseInt(limit, 10),\n        order: [[\'createdAt\', \'DESC\']],\n      });\n      \n      return successResponse(res, {\n        message: \'Users retrieved successfully\',\n        data: users.rows.map(user => ({\n          id: user.id,\n          email: user.email,\n          firstName: user.firstName,\n          lastName: user.lastName,\n          role: user.role,\n          phone: user.phone,\n          isVerified: user.isVerified,\n          lastLogin: user.lastLogin,\n          createdAt: user.createdAt,\n          updatedAt: user.updatedAt,\n        })),\n        pagination: {\n          currentPage: parseInt(page, 10),\n          totalPages: Math.ceil(users.count / parseInt(limit, 10)),\n          totalRecords: users.count,\n        },\n      });\n    } catch (error) {\n      logger.error(\'Get all users error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to retrieve users\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Verify user\n   */\n  async verifyUser(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find user\n      const user = await User.findByPk(id);\n      \n      if (!user) {\n        return errorResponse(res, {\n          message: \'User not found\',\n        }, 404);\n      }\n      \n      // Verify user\n      await user.update({ isVerified: true });\n      \n      return successResponse(res, {\n        message: \'User verified successfully\',\n        data: {\n          id: user.id,\n          email: user.email,\n          firstName: user.firstName,\n          lastName: user.lastName,\n          role: user.role,\n          phone: user.phone,\n          isVerified: user.isVerified,\n          lastLogin: user.lastLogin,\n          createdAt: user.createdAt,\n          updatedAt: user.updatedAt,\n        },\n      });\n    } catch (error) {\n      logger.error(\'Verify user error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to verify user\',\n        error: error.message,\n      }, 500);\n    }\n  }\n}\n\nmodule.exports = new UserController();\n</full-file-rewrite>\n</function_calls>'}
{'role': 'assistant', 'content': 'Let\'s fix the review.controller.js file:\n\n<function_calls>\n<full-file-rewrite file_path="src/controllers/review.controller.js">\nconst Review = require(\'../models/Review.model\');\nconst { successResponse, errorResponse } = require(\'../utils/response\');\nconst logger = require(\'../utils/logger\');\n\nclass ReviewController {\n  /**\n   * Create a new review\n   */\n  async createReview(req, res) {\n    try {\n      const { bookingId, patientId, doctorId, hospitalId, rating, comment, isVerified } = req.body;\n      \n      // Create review\n      const review = await Review.create({\n        bookingId,\n        patientId,\n        doctorId,\n        hospitalId,\n        rating,\n        comment,\n        isVerified,\n      });\n      \n      return successResponse(res, {\n        message: \'Review created successfully\',\n        data: review,\n      }, 201);\n    } catch (error) {\n      logger.error(\'Create review error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to create review\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get review by ID\n   */\n  async getReview(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find review\n      const review = await Review.findByPk(id);\n      \n      if (!review) {\n        return errorResponse(res, {\n          message: \'Review not found\',\n        }, 404);\n      }\n      \n      return successResponse(res, {\n        message: \'Review retrieved successfully\',\n        data: review,\n      });\n    } catch (error) {\n      logger.error(\'Get review error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to retrieve review\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Update review\n   */\n  async updateReview(req, res) {\n    try {\n      const { id } = req.params;\n      const { rating, comment } = req.body;\n      \n      // Find review\n      const review = await Review.findByPk(id);\n      \n      if (!review) {\n        return errorResponse(res, {\n          message: \'Review not found\',\n        }, 404);\n      }\n      \n      // Update review\n      await review.update({\n        rating,\n        comment,\n      });\n      \n      return successResponse(res, {\n        message: \'Review updated successfully\',\n        data: review,\n      });\n    } catch (error) {\n      logger.error(\'Update review error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to update review\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Delete review\n   */\n  async deleteReview(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find review\n      const review = await Review.findByPk(id);\n      \n      if (!review) {\n        return errorResponse(res, {\n          message: \'Review not found\',\n        }, 404);\n      }\n      \n      // Delete review\n      await review.destroy();\n      \n      return successResponse(res, {\n        message: \'Review deleted successfully\',\n      });\n    } catch (error) {\n      logger.error(\'Delete review error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to delete review\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get all reviews\n   */\n  async getAllReviews(req, res) {\n    try {\n      const { page = 1, limit = 10, doctorId, hospitalId, minRating } = req.query;\n      \n      // Build where clause\n      const where = {};\n      if (doctorId) where.doctorId = doctorId;\n      if (hospitalId) where.hospitalId = hospitalId;\n      if (minRating) where.rating = { [Sequelize.Op.gte]: minRating };\n      \n      // Get reviews with pagination\n      const reviews = await Review.findAndCountAll({\n        where,\n        limit: parseInt(limit, 10),\n        offset: (parseInt(page, 10) - 1) * parseInt(limit, 10),\n        order: [[\'createdAt\', \'DESC\']],\n      });\n      \n      return successResponse(res, {\n        message: \'Reviews retrieved successfully\',\n        data: reviews.rows,\n        pagination: {\n          currentPage: parseInt(page, 10),\n          totalPages: Math.ceil(reviews.count / parseInt(limit, 10)),\n          totalRecords: reviews.c...\n The full message content is stored at /workspace/summarized_conversations/original_conversation_1761712795_8504.txt'}
{'role': 'assistant', 'content': 'Let\'s continue fixing the other controller files. Let\'s fix the appointment.controller.js file:\n\n<function_calls>\n<full-file-rewrite file_path="src/controllers/appointment.controller.js">\nconst Appointment = require(\'../models/Appointment.model\');\nconst { successResponse, errorResponse } = require(\'../utils/response\');\nconst logger = require(\'../utils/logger\');\n\nclass AppointmentController {\n  /**\n   * Create a new appointment\n   */\n  async createAppointment(req, res) {\n    try {\n      const { patientId, doctorId, hospitalId, scheduledAt, notes } = req.body;\n      \n      // Create appointment\n      const appointment = await Appointment.create({\n        patientId,\n        doctorId,\n        hospitalId,\n        scheduledAt,\n        notes,\n      });\n      \n      return successResponse(res, {\n        message: \'Appointment created successfully\',\n        data: appointment,\n      }, 201);\n    } catch (error) {\n      logger.error(\'Create appointment error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to create appointment\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get appointment by ID\n   */\n  async getAppointment(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find appointment\n      const appointment = await Appointment.findByPk(id);\n      \n      if (!appointment) {\n        return errorResponse(res, {\n          message: \'Appointment not found\',\n          code: \'APPOINTMENT_NOT_FOUND\',\n        }, 404);\n      }\n      \n      return successResponse(res, {\n        message: \'Appointment retrieved successfully\',\n        data: appointment,\n      });\n    } catch (error) {\n      logger.error(\'Get appointment error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to retrieve appointment\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Update appointment\n   */\n  async updateAppointment(req, res) {\n    try {\n      const { id } = req.params;\n      const { scheduledAt, notes, status } = req.body;\n      \n      // Find appointment\n      const appointment = await Appointment.findByPk(id);\n      \n      if (!appointment) {\n        return errorResponse(res, {\n          message: \'Appointment not found\',\n          code: \'APPOINTMENT_NOT_FOUND\',\n        }, 404);\n      }\n      \n      // Update appointment\n      await appointment.update({\n        scheduledAt,\n        notes,\n        status,\n      });\n      \n      return successResponse(res, {\n        message: \'Appointment updated successfully\',\n        data: appointment,\n      });\n    } catch (error) {\n      logger.error(\'Update appointment error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to update appointment\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Update appointment status\n   */\n  async updateAppointmentStatus(req, res) {\n    try {\n      const { id } = req.params;\n      const { status } = req.body;\n      \n      // Find appointment\n      const appointment = await Appointment.findByPk(id);\n      \n      if (!appointment) {\n        return errorResponse(res, {\n          message: \'Appointment not found\',\n          code: \'APPOINTMENT_NOT_FOUND\',\n        }, 404);\n      }\n      \n      // Update appointment status\n      await appointment.update({ status });\n      \n      return successResponse(res, {\n        message: \'Appointment status updated successfully\',\n        data: appointment,\n      });\n    } catch (error) {\n      logger.error(\'Update appointment status error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to update appointment status\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get all appointments\n   */\n  async getAllAppointments(req, res) {\n    try {\n      const { page = 1, limit = 10, status, patientId, doctorId } = req.query;\n      \n      // Build where clause\n      const where = {};\n      if (status) where.status = status;\n      if (patientId) where.patientId = patientId;\n      if (doctorId) where.doctorId = doctorId;\n      \n      // Get appointments with pagination\n      const appointme...\n The full message content is stored at /workspace/summarized_conversations/original_conversation_1761712560_6345.txt'}
{'role': 'assistant', 'content': 'Let\'s fix the doctor.controller.js file:\n\n<function_calls>\n<full-file-rewrite file_path="src/controllers/doctor.controller.js">\nconst Doctor = require(\'../models/Doctor.model\');\nconst { successResponse, errorResponse } = require(\'../utils/response\');\nconst logger = require(\'../utils/logger\');\n\nclass DoctorController {\n  /**\n   * Create a new doctor\n   */\n  async createDoctor(req, res) {\n    try {\n      const { userId, specialty, licenseNumber, yearsOfExperience, bio, education, certifications } = req.body;\n      \n      // Create doctor\n      const doctor = await Doctor.create({\n        userId,\n        specialty,\n        licenseNumber,\n        yearsOfExperience,\n        bio,\n        education,\n        certifications,\n      });\n      \n      return successResponse(res, {\n        message: \'Doctor created successfully\',\n        data: doctor,\n      }, 201);\n    } catch (error) {\n      logger.error(\'Create doctor error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to create doctor\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get doctor by ID\n   */\n  async getDoctor(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find doctor\n      const doctor = await Doctor.findByPk(id);\n      \n      if (!doctor) {\n        return errorResponse(res, {\n          message: \'Doctor not found\',\n        }, 404);\n      }\n      \n      return successResponse(res, {\n        message: \'Doctor retrieved successfully\',\n        data: doctor,\n      });\n    } catch (error) {\n      logger.error(\'Get doctor error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to retrieve doctor\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Update doctor\n   */\n  async updateDoctor(req, res) {\n    try {\n      const { id } = req.params;\n      const { specialty, licenseNumber, yearsOfExperience, bio, education, certifications, availability } = req.body;\n      \n      // Find doctor\n      const doctor = await Doctor.findByPk(id);\n      \n      if (!doctor) {\n        return errorResponse(res, {\n          message: \'Doctor not found\',\n        }, 404);\n      }\n      \n      // Update doctor\n      await doctor.update({\n        specialty,\n        licenseNumber,\n        yearsOfExperience,\n        bio,\n        education,\n        certifications,\n        availability,\n      });\n      \n      return successResponse(res, {\n        message: \'Doctor updated successfully\',\n        data: doctor,\n      });\n    } catch (error) {\n      logger.error(\'Update doctor error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to update doctor\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Delete doctor\n   */\n  async deleteDoctor(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find doctor\n      const doctor = await Doctor.findByPk(id);\n      \n      if (!doctor) {\n        return errorResponse(res, {\n          message: \'Doctor not found\',\n        }, 404);\n      }\n      \n      // Delete doctor\n      await doctor.destroy();\n      \n      return successResponse(res, {\n        message: \'Doctor deleted successfully\',\n      });\n    } catch (error) {\n      logger.error(\'Delete doctor error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to delete doctor\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get all doctors\n   */\n  async getAllDoctors(req, res) {\n    try {\n      const { page = 1, limit = 10, specialty, isVerified } = req.query;\n      \n      // Build where clause\n      const where = {};\n      if (specialty) where.specialty = specialty;\n      if (isVerified !== undefined) where.isVerified = isVerified === \'true\';\n      \n      // Get doctors with pagination\n      const doctors = await Doctor.findAndCountAll({\n        where,\n        limit: parseInt(limit, 10),\n        offset: (parseInt(page, 10) - 1) * parseInt(limit, 10),\n        order: [[\'createdAt\', \'DESC\']],\n      });\n      \n      return successResponse(res, {\n        message: \'Doctors retrieved successfully\',\n        data: doctors.rows,\n        p...\n The full message content is stored at /workspace/summarized_conversations/original_conversation_1761713205_2688.txt'}
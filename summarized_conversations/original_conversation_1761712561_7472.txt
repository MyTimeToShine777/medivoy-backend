{'role': 'assistant', 'content': 'Let\'s fix the booking.controller.js file:\n\n<function_calls>\n<full-file-rewrite file_path="src/controllers/booking.controller.js">\nconst Booking = require(\'../models/Booking.model\');\nconst { successResponse, errorResponse } = require(\'../utils/response\');\nconst logger = require(\'../utils/logger\');\n\nclass BookingController {\n  /**\n   * Create a new booking\n   */\n  async createBooking(req, res) {\n    try {\n      const { patientId, treatmentId, hospitalId, notes } = req.body;\n      \n      // Create booking\n      const booking = await Booking.create({\n        patientId,\n        treatmentId,\n        hospitalId,\n        notes,\n      });\n      \n      return successResponse(res, {\n        message: \'Booking created successfully\',\n        data: booking,\n      }, 201);\n    } catch (error) {\n      logger.error(\'Create booking error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to create booking\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get booking by ID\n   */\n  async getBooking(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find booking\n      const booking = await Booking.findByPk(id);\n      \n      if (!booking) {\n        return errorResponse(res, {\n          message: \'Booking not found\',\n          code: \'BOOKING_NOT_FOUND\',\n        }, 404);\n      }\n      \n      return successResponse(res, {\n        message: \'Booking retrieved successfully\',\n        data: booking,\n      });\n    } catch (error) {\n      logger.error(\'Get booking error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to retrieve booking\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Update booking\n   */\n  async updateBooking(req, res) {\n    try {\n      const { id } = req.params;\n      const { notes, status } = req.body;\n      \n      // Find booking\n      const booking = await Booking.findByPk(id);\n      \n      if (!booking) {\n        return errorResponse(res, {\n          message: \'Booking not found\',\n          code: \'BOOKING_NOT_FOUND\',\n        }, 404);\n      }\n      \n      // Update booking\n      await booking.update({\n        notes,\n        status,\n      });\n      \n      return successResponse(res, {\n        message: \'Booking updated successfully\',\n        data: booking,\n      });\n    } catch (error) {\n      logger.error(\'Update booking error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to update booking\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Update booking status\n   */\n  async updateBookingStatus(req, res) {\n    try {\n      const { id } = req.params;\n      const { status } = req.body;\n      \n      // Find booking\n      const booking = await Booking.findByPk(id);\n      \n      if (!booking) {\n        return errorResponse(res, {\n          message: \'Booking not found\',\n          code: \'BOOKING_NOT_FOUND\',\n        }, 404);\n      }\n      \n      // Update booking status\n      await booking.update({ status });\n      \n      return successResponse(res, {\n        message: \'Booking status updated successfully\',\n        data: booking,\n      });\n    } catch (error) {\n      logger.error(\'Update booking status error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to update booking status\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get all bookings\n   */\n  async getAllBookings(req, res) {\n    try {\n      const { page = 1, limit = 10, status, patientId, hospitalId } = req.query;\n      \n      // Build where clause\n      const where = {};\n      if (status) where.status = status;\n      if (patientId) where.patientId = patientId;\n      if (hospitalId) where.hospitalId = hospitalId;\n      \n      // Get bookings with pagination\n      const bookings = await Booking.findAndCountAll({\n        where,\n        limit: parseInt(limit, 10),\n        offset: (parseInt(page, 10) - 1) * parseInt(limit, 10),\n        order: [[\'createdAt\', \'DESC\']],\n      });\n      \n      return successResponse(res, {\n        message: \'Bookings retrieved successfully\',\n        data: bookings.rows,\n        p...\n The full message content is stored at /workspace/summarized_conversations/original_conversation_1761712343_1841.txt'}
{'role': 'assistant', 'content': 'Let\'s fix the faq.controller.js file:\n\n<function_calls>\n<full-file-rewrite file_path="src/controllers/faq.controller.js">\nconst FAQ = require(\'../models/FAQ.model\');\nconst { successResponse, errorResponse } = require(\'../utils/response\');\nconst logger = require(\'../utils/logger\');\n\nclass FAQController {\n  /**\n   * Create a new FAQ\n   */\n  async createFAQ(req, res) {\n    try {\n      const { question, answer, category, sortOrder } = req.body;\n      \n      // Create FAQ\n      const faq = await FAQ.create({\n        question,\n        answer,\n        category,\n        sortOrder,\n      });\n      \n      return successResponse(res, {\n        message: \'FAQ created successfully\',\n        data: faq,\n      }, 201);\n    } catch (error) {\n      logger.error(\'Create FAQ error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to create FAQ\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get FAQ by ID\n   */\n  async getFAQ(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find FAQ\n      const faq = await FAQ.findByPk(id);\n      \n      if (!faq) {\n        return errorResponse(res, {\n          message: \'FAQ not found\',\n        }, 404);\n      }\n      \n      return successResponse(res, {\n        message: \'FAQ retrieved successfully\',\n        data: faq,\n      });\n    } catch (error) {\n      logger.error(\'Get FAQ error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to retrieve FAQ\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get all FAQs\n   */\n  async getAllFAQs(req, res) {\n    try {\n      const { page = 1, limit = 10, category } = req.query;\n      \n      // Build where clause\n      const where = {};\n      if (category) where.category = category;\n      \n      // Get FAQs with pagination\n      const faqs = await FAQ.findAndCountAll({\n        where,\n        limit: parseInt(limit, 10),\n        offset: (parseInt(page, 10) - 1) * parseInt(limit, 10),\n        order: [[\'sortOrder\', \'ASC\'], [\'createdAt\', \'DESC\']],\n      });\n      \n      return successResponse(res, {\n        message: \'FAQs retrieved successfully\',\n        data: faqs.rows,\n        pagination: {\n          currentPage: parseInt(page, 10),\n          totalPages: Math.ceil(faqs.count / parseInt(limit, 10)),\n          totalRecords: faqs.count,\n        },\n      });\n    } catch (error) {\n      logger.error(\'Get all FAQs error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to retrieve FAQs\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get FAQs by category\n   */\n  async getFAQsByCategory(req, res) {\n    try {\n      const { category } = req.params;\n      const { page = 1, limit = 10 } = req.query;\n      \n      // Get FAQs by category with pagination\n      const faqs = await FAQ.findAndCountAll({\n        where: { category },\n        limit: parseInt(limit, 10),\n        offset: (parseInt(page, 10) - 1) * parseInt(limit, 10),\n        order: [[\'sortOrder\', \'ASC\'], [\'createdAt\', \'DESC\']],\n      });\n      \n      return successResponse(res, {\n        message: \'FAQs retrieved successfully\',\n        data: faqs.rows,\n        pagination: {\n          currentPage: parseInt(page, 10),\n          totalPages: Math.ceil(faqs.count / parseInt(limit, 10)),\n          totalRecords: faqs.count,\n        },\n      });\n    } catch (error) {\n      logger.error(\'Get FAQs by category error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to retrieve FAQs by category\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Update FAQ\n   */\n  async updateFAQ(req, res) {\n    try {\n      const { id } = req.params;\n      const { question, answer, category, sortOrder } = req.body;\n      \n      // Find FAQ\n      const faq = await FAQ.findByPk(id);\n      \n      if (!faq) {\n        return errorResponse(res, {\n          message: \'FAQ not found\',\n        }, 404);\n      }\n      \n      // Update FAQ\n      await faq.update({\n        question,\n        answer,\n        category,\n        sortOrder,\n      });\n      \n      return successResponse(res, {\n        message: \'FAQ updated successfully\',\n        data: faq,\n      });\n    } catch (error) {\n      logger.error(\'Update FAQ error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to update FAQ\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Delete FAQ\n   */\n  async deleteFAQ(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find FAQ\n      const faq = await FAQ.findByPk(id);\n      \n      if (!faq) {\n        return errorResponse(res, {\n          message: \'FAQ not found\',\n        }, 404);\n      }\n      \n      // Delete FAQ\n      await faq.destroy();\n      \n      return successResponse(res, {\n        message: \'FAQ deleted successfully\',\n      });\n    } catch (error) {\n      logger.error(\'Delete FAQ error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to delete FAQ\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Reorder FAQs\n   */\n  async reorderFAQs(req, res) {\n    try {\n      const { faqOrder } = req.body;\n      \n      // Update sort order for each FAQ\n      const updates = faqOrder.map((faqId, index) => \n        FAQ.update({ sortOrder: index + 1 }, { where: { id: faqId } })\n      );\n      \n      await Promise.all(updates);\n      \n      return successResponse(res, {\n        message: \'FAQs reordered successfully\',\n      });\n    } catch (error) {\n      logger.error(\'Reorder FAQs error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to reorder FAQs\',\n        error: error.message,\n      }, 500);\n    }\n  }\n}\n\nmodule.exports = new FAQController();\n</full-file-rewrite>\n</function_calls>'}
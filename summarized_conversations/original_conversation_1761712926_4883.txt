{'role': 'assistant', 'content': 'Let\'s fix the labTest.controller.js file:\n\n<function_calls>\n<full-file-rewrite file_path="src/controllers/labTest.controller.js">\nconst LabTest = require(\'../models/LabTest.model\');\nconst { successResponse, errorResponse } = require(\'../utils/response\');\nconst logger = require(\'../utils/logger\');\n\nclass LabTestController {\n  /**\n   * Create a new lab test\n   */\n  async createLabTest(req, res) {\n    try {\n      const { name, description, price, laboratoryId, isActive } = req.body;\n      \n      // Create lab test\n      const labTest = await LabTest.create({\n        name,\n        description,\n        price,\n        laboratoryId,\n        isActive,\n      });\n      \n      return successResponse(res, {\n        message: \'Lab test created successfully\',\n        data: labTest,\n      }, 201);\n    } catch (error) {\n      logger.error(\'Create lab test error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to create lab test\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get lab test by ID\n   */\n  async getLabTest(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find lab test\n      const labTest = await LabTest.findByPk(id);\n      \n      if (!labTest) {\n        return errorResponse(res, {\n          message: \'Lab test not found\',\n        }, 404);\n      }\n      \n      return successResponse(res, {\n        message: \'Lab test retrieved successfully\',\n        data: labTest,\n      });\n    } catch (error) {\n      logger.error(\'Get lab test error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to retrieve lab test\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Update lab test\n   */\n  async updateLabTest(req, res) {\n    try {\n      const { id } = req.params;\n      const { name, description, price, isActive } = req.body;\n      \n      // Find lab test\n      const labTest = await LabTest.findByPk(id);\n      \n      if (!labTest) {\n        return errorResponse(res, {\n          message: \'Lab test not found\',\n        }, 404);\n      }\n      \n      // Update lab test\n      await labTest.update({\n        name,\n        description,\n        price,\n        isActive,\n      });\n      \n      return successResponse(res, {\n        message: \'Lab test updated successfully\',\n        data: labTest,\n      });\n    } catch (error) {\n      logger.error(\'Update lab test error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to update lab test\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Delete lab test\n   */\n  async deleteLabTest(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find lab test\n      const labTest = await LabTest.findByPk(id);\n      \n      if (!labTest) {\n        return errorResponse(res, {\n          message: \'Lab test not found\',\n        }, 404);\n      }\n      \n      // Delete lab test\n      await labTest.destroy();\n      \n      return successResponse(res, {\n        message: \'Lab test deleted successfully\',\n      });\n    } catch (error) {\n      logger.error(\'Delete lab test error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to delete lab test\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get all lab tests\n   */\n  async getAllLabTests(req, res) {\n    try {\n      const { page = 1, limit = 10, laboratoryId, isActive } = req.query;\n      \n      // Build where clause\n      const where = {};\n      if (laboratoryId) where.laboratoryId = laboratoryId;\n      if (isActive !== undefined) where.isActive = isActive === \'true\';\n      \n      // Get lab tests with pagination\n      const labTests = await LabTest.findAndCountAll({\n        where,\n        limit: parseInt(limit, 10),\n        offset: (parseInt(page, 10) - 1) * parseInt(limit, 10),\n        order: [[\'createdAt\', \'DESC\']],\n      });\n      \n      return successResponse(res, {\n        message: \'Lab tests retrieved successfully\',\n        data: labTests.rows,\n        pagination: {\n          currentPage: parseInt(page, 10),\n          totalPages: Math.ceil(labTests.count / parseInt(limit, 10)),\n    ...\n The full message content is stored at /workspace/summarized_conversations/original_conversation_1761712881_5353.txt'}
{'role': 'assistant', 'content': 'Let\'s fix the support.controller.js file:\n\n<function_calls>\n<full-file-rewrite file_path="src/controllers/support.controller.js">\nconst SupportTicket = require(\'../models/SupportTicket.model\');\nconst { successResponse, errorResponse } = require(\'../utils/response\');\nconst logger = require(\'../utils/logger\');\n\nclass SupportController {\n  /**\n   * Create a new support ticket\n   */\n  async createTicket(req, res) {\n    try {\n      const { userId, subject, description, priority, category } = req.body;\n      \n      // Create support ticket\n      const ticket = await SupportTicket.create({\n        userId,\n        subject,\n        description,\n        priority,\n        category,\n      });\n      \n      return successResponse(res, {\n        message: \'Support ticket created successfully\',\n        data: ticket,\n      }, 201);\n    } catch (error) {\n      logger.error(\'Create support ticket error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to create support ticket\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get support ticket by ID\n   */\n  async getTicket(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find support ticket\n      const ticket = await SupportTicket.findByPk(id);\n      \n      if (!ticket) {\n        return errorResponse(res, {\n          message: \'Support ticket not found\',\n        }, 404);\n      }\n      \n      return successResponse(res, {\n        message: \'Support ticket retrieved successfully\',\n        data: ticket,\n      });\n    } catch (error) {\n      logger.error(\'Get support ticket error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to retrieve support ticket\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Update support ticket\n   */\n  async updateTicket(req, res) {\n    try {\n      const { id } = req.params;\n      const { subject, description, priority, category, status } = req.body;\n      \n      // Find support ticket\n      const ticket = await SupportTicket.findByPk(id);\n      \n      if (!ticket) {\n        return errorResponse(res, {\n          message: \'Support ticket not found\',\n        }, 404);\n      }\n      \n      // Update support ticket\n      await ticket.update({\n        subject,\n        description,\n        priority,\n        category,\n        status,\n      });\n      \n      return successResponse(res, {\n        message: \'Support ticket updated successfully\',\n        data: ticket,\n      });\n    } catch (error) {\n      logger.error(\'Update support ticket error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to update support ticket\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Delete support ticket\n   */\n  async deleteTicket(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find support ticket\n      const ticket = await SupportTicket.findByPk(id);\n      \n      if (!ticket) {\n        return errorResponse(res, {\n          message: \'Support ticket not found\',\n        }, 404);\n      }\n      \n      // Delete support ticket\n      await ticket.destroy();\n      \n      return successResponse(res, {\n        message: \'Support ticket deleted successfully\',\n      });\n    } catch (error) {\n      logger.error(\'Delete support ticket error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to delete support ticket\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get all support tickets\n   */\n  async getAllTickets(req, res) {\n    try {\n      const { page = 1, limit = 10, status, priority, category, userId } = req.query;\n      \n      // Build where clause\n      const where = {};\n      if (status) where.status = status;\n      if (priority) where.priority = priority;\n      if (category) where.category = category;\n      if (userId) where.userId = userId;\n      \n      // Get support tickets with pagination\n      const tickets = await SupportTicket.findAndCountAll({\n        where,\n        limit: parseInt(limit, 10),\n        offset: (parseInt(page, 10) - 1) * parseInt(limit, 10),\n        order: [[\'createdAt\', \'DESC\'...\n The full message content is stored at /workspace/summarized_conversations/original_conversation_1761713214_3981.txt'}
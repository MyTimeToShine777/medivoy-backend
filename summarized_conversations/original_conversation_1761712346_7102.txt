{'role': 'assistant', 'content': 'Let\'s fix the hospital.controller.js file:\n\n<function_calls>\n<full-file-rewrite file_path="src/controllers/hospital.controller.js">\nconst Hospital = require(\'../models/Hospital.model\');\nconst { successResponse, errorResponse } = require(\'../utils/response\');\nconst logger = require(\'../utils/logger\');\n\nclass HospitalController {\n  /**\n   * Create a new hospital\n   */\n  async createHospital(req, res) {\n    try {\n      const { userId, name, address, phone, email, licenseNumber, certifications, specializations } = req.body;\n      \n      // Create hospital\n      const hospital = await Hospital.create({\n        userId,\n        name,\n        address,\n        phone,\n        email,\n        licenseNumber,\n        certifications,\n        specializations,\n      });\n      \n      return successResponse(res, {\n        message: \'Hospital created successfully\',\n        data: hospital,\n      }, 201);\n    } catch (error) {\n      logger.error(\'Create hospital error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to create hospital\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get hospital by ID\n   */\n  async getHospital(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find hospital\n      const hospital = await Hospital.findByPk(id);\n      \n      if (!hospital) {\n        return errorResponse(res, {\n          message: \'Hospital not found\',\n        }, 404);\n      }\n      \n      return successResponse(res, {\n        message: \'Hospital retrieved successfully\',\n        data: hospital,\n      });\n    } catch (error) {\n      logger.error(\'Get hospital error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to retrieve hospital\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Update hospital\n   */\n  async updateHospital(req, res) {\n    try {\n      const { id } = req.params;\n      const { name, address, phone, email, licenseNumber, certifications, specializations, isActive } = req.body;\n      \n      // Find hospital\n      const hospital = await Hospital.findByPk(id);\n      \n      if (!hospital) {\n        return errorResponse(res, {\n          message: \'Hospital not found\',\n        }, 404);\n      }\n      \n      // Update hospital\n      await hospital.update({\n        name,\n        address,\n        phone,\n        email,\n        licenseNumber,\n        certifications,\n        specializations,\n        isActive,\n      });\n      \n      return successResponse(res, {\n        message: \'Hospital updated successfully\',\n        data: hospital,\n      });\n    } catch (error) {\n      logger.error(\'Update hospital error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to update hospital\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Delete hospital\n   */\n  async deleteHospital(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find hospital\n      const hospital = await Hospital.findByPk(id);\n      \n      if (!hospital) {\n        return errorResponse(res, {\n          message: \'Hospital not found\',\n        }, 404);\n      }\n      \n      // Delete hospital\n      await hospital.destroy();\n      \n      return successResponse(res, {\n        message: \'Hospital deleted successfully\',\n      });\n    } catch (error) {\n      logger.error(\'Delete hospital error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to delete hospital\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Get all hospitals\n   */\n  async getAllHospitals(req, res) {\n    try {\n      const { page = 1, limit = 10, isVerified, isActive } = req.query;\n      \n      // Build where clause\n      const where = {};\n      if (isVerified !== undefined) where.isVerified = isVerified === \'true\';\n      if (isActive !== undefined) where.isActive = isActive === \'true\';\n      \n      // Get hospitals with pagination\n      const hospitals = await Hospital.findAndCountAll({\n        where,\n        limit: parseInt(limit, 10),\n        offset: (parseInt(page, 10) - 1) * parseInt(limit, 10),\n        order: [[\'createdAt\', \'DESC\']],\n      });\n      \n      return successResponse(res, {\n        message: \'Hospitals retrieved successfully\',\n        data: hospitals.rows,\n        pagination: {\n          currentPage: parseInt(page, 10),\n          totalPages: Math.ceil(hospitals.count / parseInt(limit, 10)),\n          totalRecords: hospitals.count,\n        },\n      });\n    } catch (error) {\n      logger.error(\'Get all hospitals error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to retrieve hospitals\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Add doctor to hospital\n   */\n  async addDoctor(req, res) {\n    try {\n      const { id } = req.params;\n      const { doctorId } = req.body;\n      \n      // Find hospital\n      const hospital = await Hospital.findByPk(id);\n      \n      if (!hospital) {\n        return errorResponse(res, {\n          message: \'Hospital not found\',\n        }, 404);\n      }\n      \n      // Add doctor to hospital\n      // Note: This would require the HospitalDoctor model\n      // await HospitalDoctor.create({ hospitalId: id, doctorId });\n      \n      return successResponse(res, {\n        message: \'Doctor added to hospital successfully\',\n      });\n    } catch (error) {\n      logger.error(\'Add doctor to hospital error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to add doctor to hospital\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Remove doctor from hospital\n   */\n  async removeDoctor(req, res) {\n    try {\n      const { id } = req.params;\n      const { doctorId } = req.body;\n      \n      // Find hospital\n      const hospital = await Hospital.findByPk(id);\n      \n      if (!hospital) {\n        return errorResponse(res, {\n          message: \'Hospital not found\',\n        }, 404);\n      }\n      \n      // Remove doctor from hospital\n      // Note: This would require the HospitalDoctor model\n      // await HospitalDoctor.destroy({ where: { hospitalId: id, doctorId } });\n      \n      return successResponse(res, {\n        message: \'Doctor removed from hospital successfully\',\n      });\n    } catch (error) {\n      logger.error(\'Remove doctor from hospital error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to remove doctor from hospital\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Add treatment to hospital\n   */\n  async addTreatment(req, res) {\n    try {\n      const { id } = req.params;\n      const { treatmentId } = req.body;\n      \n      // Find hospital\n      const hospital = await Hospital.findByPk(id);\n      \n      if (!hospital) {\n        return errorResponse(res, {\n          message: \'Hospital not found\',\n        }, 404);\n      }\n      \n      // Add treatment to hospital\n      // Note: This would require the HospitalTreatment model\n      // await HospitalTreatment.create({ hospitalId: id, treatmentId });\n      \n      return successResponse(res, {\n        message: \'Treatment added to hospital successfully\',\n      });\n    } catch (error) {\n      logger.error(\'Add treatment to hospital error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to add treatment to hospital\',\n        error: error.message,\n      }, 500);\n    }\n  }\n\n  /**\n   * Verify hospital\n   */\n  async verifyHospital(req, res) {\n    try {\n      const { id } = req.params;\n      \n      // Find hospital\n      const hospital = await Hospital.findByPk(id);\n      \n      if (!hospital) {\n        return errorResponse(res, {\n          message: \'Hospital not found\',\n        }, 404);\n      }\n      \n      // Update hospital verification status\n      await hospital.update({ isVerified: true });\n      \n      return successResponse(res, {\n        message: \'Hospital verified successfully\',\n        data: hospital,\n      });\n    } catch (error) {\n      logger.error(\'Verify hospital error:\', error);\n      return errorResponse(res, {\n        message: \'Failed to verify hospital\',\n        error: error.message,\n      }, 500);\n    }\n  }\n}\n\nmodule.exports = new HospitalController();\n</full-file-rewrite>\n</function_calls>'}